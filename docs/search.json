[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "R Projects",
    "section": "",
    "text": "Welcome\nThis website shows a sample of my previous statistical analysis work using RStudio.",
    "crumbs": [
      "Welcome"
    ]
  },
  {
    "objectID": "intro.html",
    "href": "intro.html",
    "title": "1  Introduction",
    "section": "",
    "text": "This is a book created from markdown and executable code.\nSee Knuth (1984) for additional discussion of literate programming.\n\n1 + 1\n\n[1] 2\n\n\n\n\n\n\nKnuth, Donald E. 1984. “Literate Programming.” Comput. J. 27 (2): 97–111. https://doi.org/10.1093/comjnl/27.2.97.",
    "crumbs": [
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Introduction</span>"
    ]
  },
  {
    "objectID": "summary.html",
    "href": "summary.html",
    "title": "2  Summary",
    "section": "",
    "text": "In summary, this book has no content whatsoever.\n\n1 + 1\n\n[1] 2",
    "crumbs": [
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Summary</span>"
    ]
  },
  {
    "objectID": "references.html",
    "href": "references.html",
    "title": "References",
    "section": "",
    "text": "Knuth, Donald E. 1984. “Literate Programming.” Comput.\nJ. 27 (2): 97–111. https://doi.org/10.1093/comjnl/27.2.97.",
    "crumbs": [
      "References"
    ]
  },
  {
    "objectID": "project_06.html",
    "href": "project_06.html",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "",
    "text": "R Setup\nCode\nknitr::opts_chunk$set(comment = NA) \n\nlibrary(janitor)\nlibrary(dplyr)\nlibrary(readr)\nlibrary(magrittr)\nlibrary(Hmisc)\nlibrary(knitr)\nlibrary(naniar)\nlibrary(easystats)\nlibrary(tableone)\nlibrary(mosaic)\nlibrary(gt)\nlibrary(Epi)\nlibrary(Matching)\nlibrary(arm)\nlibrary(cobalt)\nlibrary(broom)\nlibrary(survival)\nlibrary(ggplot2)\nlibrary(mice)\nlibrary(patchwork)\nlibrary(twang)\nlibrary(car)\nlibrary(rbounds)\nlibrary(tidyverse)\n\ntheme_set(theme_bw())",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#joining-data-sets",
    "href": "project_06.html#joining-data-sets",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "7.1 Joining data sets",
    "text": "7.1 Joining data sets\nWe will only use the outcomes smoking and excessive drinking from the 2024 CHR data set.\n\n\nCode\nchr24_var &lt;- chr24_raw|&gt; dplyr::select( \n    fipscode,\n    v009_rawvalue,\n    v049_rawvalue)\n\n\nThe exposure dentist proportion and the covariates will be pulled from the 2018 CHR data set.\n\n\nCode\nchr18_var &lt;- chr18_raw|&gt; dplyr::select( \n    fipscode,\n    v002_rawvalue,\n    v036_rawvalue,\n    v042_rawvalue,\n    v133_rawvalue,\n    v085_rawvalue,\n    v004_rawvalue,\n    v088_rawvalue,\n    v062_other_data_1,\n    v069_rawvalue,\n    v023_rawvalue,\n    v044_rawvalue, \n    v140_rawvalue,\n    v147_rawvalue,\n    v060_rawvalue,\n    v143_rawvalue,\n    v021_rawvalue,\n    v141_rawvalue,\n    v153_rawvalue,\n    v154_rawvalue,\n    v052_rawvalue,\n    v053_rawvalue, \n    v054_rawvalue, \n    v055_rawvalue,\n    v081_rawvalue,\n    v056_rawvalue,\n    v126_rawvalue,\n    v057_rawvalue,\n    v058_rawvalue,\n    v070_rawvalue,\n    v011_rawvalue,\n    v063_rawvalue) \n\n\nNow we will joing the two table to produce our initial working data set chr_1.\n\n\nCode\nchr_1 &lt;- chr18_var |&gt;\n  left_join(chr24_var, by= \"fipscode\")\n\ndim(chr_1)\n\n\n[1] 3195   34\n\n\nOur joint data set has 3,195 observations (counties) and 34 variables (health measures).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#the-codebook",
    "href": "project_06.html#the-codebook",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "The Codebook",
    "text": "The Codebook\nThe data file includes 3,195 observations (counties), on 34 variables (health measures).\n\n\n\n\n\n\n\n\n\nVariable\nDescription\nNotes\nYear\n\n\n\n\nfipscode\n5-digit FIPS Code\n\n\n\n\nv088_rawvalue\nNumber of dentists per 1000 population\nBinary Exposure: High proportion vs Low proportion\n2018\n\n\nv009_rawvalue\nAdult Smoking prevalence %\nQuantitative Outcome 1\n2024\n\n\nv049_rawvalue\nExcessive Drinking prevalence %\nQuantitative outcome 2\n2024\n\n\nv052_rawvalue\n% Below 18 Years of Age proportion\nCovariate\n2018\n\n\nv053_rawvalue\n% 65 and Older proportion\nCovariate\n2018\n\n\nv054_rawvalue\n% Non-Hispanic Black proportion\nCovariate\n2018\n\n\nv055_rawvalue\n% American Indian or Alaska Native proportion\nCovariate\n2018\n\n\nv081_rawvalue\n% Asian proportion\nCovariate\n2018\n\n\nv056_rawvalue\n% Hispanic proportion\nCovariate\n2018\n\n\nv126_rawvalue\n% Non-Hispanic White proportion\nCovariate\n2018\n\n\nv057_rawvalue\n% Female proportion\nCovariate\n2018\n\n\nv058_rawvalue\n% Rural\nCovariate\n2018\n\n\nv002_rawvalue\n% Poor or Fair Health\nCovariate\n2018\n\n\nv036_rawvalue\nPoor Physical Health Days\nCovariate\n2018\n\n\nv042_rawvalue\nPoor Mental Health Days\nCovariate\n2018\n\n\nv133_rawvalue\nFood Environment Index\nCovariate\n2018\n\n\nv085_rawvalue\nUninsured population %\nCovariate\n2018\n\n\nv004_rawvalue\nPrimary Care Physicians per population\nCovariate\n2018\n\n\nv062_other_data_1\nRatio of population to mental health providers\nCovariate\n2018\n\n\nv021_rawvalue\nHigh School Completion %\nCovariate\n2018\n\n\nv069_rawvalue\nSome College %\nCovariate\n2018\n\n\nv023_rawvalue\nUnemployment %\nCovariate\n2018\n\n\nv044_rawvalue\nIncome Inequality\nCovariate\n2018\n\n\nv140_rawvalue\nSocial Associations\nCovariate\n2018\n\n\nv070_rawvalue\nPhysical Inactivity days\nCovariate\n2018\n\n\nv011_rawvalue\nAdult Obesity prevalence %\nCovariate\n2018\n\n\nv060_rawvalue\nDiabetes Prevalence %\nCovariate\n2018\n\n\nv143_rawvalue\nInsufficient Sleep proportion %\nCovariate\n2018\n\n\nv141_rawvalue\nResidential Segregation - Black/White\nCovariate\n2018\n\n\nv147_rawvalue\nLife Expectancy (years)\nCovariate\n2018\n\n\nv063_rawvalue\nMedian Household Income\nCovariate\n2018\n\n\nv153_rawvalue\nHome ownership\nCovariate\n2018\n\n\nv154_rawvalue\nSevere Housing Cost Burden\nCovariate\n2018\n\n\n\n\nNote: The analysis will include one exposure and two outcome variables.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#renaming-the-variables",
    "href": "project_06.html#renaming-the-variables",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "7.2 Renaming the variables",
    "text": "7.2 Renaming the variables\n\n\nCode\nchr_1 &lt;- chr_1 |&gt;\n  mutate(dentist_grp = v088_rawvalue*100,\n         smoking_prop = v009_rawvalue*100,\n         drinking_prop = v049_rawvalue*100)|&gt;\n  rename(below_18 = v052_rawvalue,\n         above_65 = v053_rawvalue,\n         black = v054_rawvalue,\n         native = v055_rawvalue,\n         asian = v081_rawvalue,\n         hispanic = v056_rawvalue,\n         white = v126_rawvalue,\n         female = v057_rawvalue,\n         rural = v058_rawvalue,\n         poor_health = v002_rawvalue,\n         poor_physical = v036_rawvalue,\n         poor_mental = v042_rawvalue,\n         food_index = v133_rawvalue,\n         uninsured = v085_rawvalue,\n         primary_care = v004_rawvalue,\n         mental_care = v062_other_data_1,\n         highschool_grad  = v021_rawvalue,\n         some_college = v069_rawvalue,\n         unemployment = v023_rawvalue,\n         income_inequality = v044_rawvalue,\n         social_score = v140_rawvalue,\n         inactivity = v070_rawvalue,\n         obesity = v011_rawvalue,\n         diabetes = v060_rawvalue, \n         insuff_sleep = v143_rawvalue,\n         segregation = v141_rawvalue, \n         life_expectancy = v147_rawvalue,\n         household_income = v063_rawvalue, \n         home_ownership = v153_rawvalue,\n         housing_burden = v154_rawvalue )|&gt;\n  dplyr::select(-v088_rawvalue, -v009_rawvalue , -v049_rawvalue)\n\n\nChecking the new names:\n\n\nCode\nnames(chr_1)\n\n\n [1] \"fipscode\"          \"poor_health\"       \"poor_physical\"    \n [4] \"poor_mental\"       \"food_index\"        \"uninsured\"        \n [7] \"primary_care\"      \"mental_care\"       \"some_college\"     \n[10] \"unemployment\"      \"income_inequality\" \"social_score\"     \n[13] \"life_expectancy\"   \"diabetes\"          \"insuff_sleep\"     \n[16] \"highschool_grad\"   \"segregation\"       \"home_ownership\"   \n[19] \"housing_burden\"    \"below_18\"          \"above_65\"         \n[22] \"black\"             \"native\"            \"asian\"            \n[25] \"hispanic\"          \"white\"             \"female\"           \n[28] \"rural\"             \"inactivity\"        \"obesity\"          \n[31] \"household_income\"  \"dentist_grp\"       \"smoking_prop\"     \n[34] \"drinking_prop\"    \n\n\n\nThe new names look reasonable and are free from spelling errors.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#categorizing-exposure-dentist_grp",
    "href": "project_06.html#categorizing-exposure-dentist_grp",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "7.3 Categorizing Exposure dentist_grp",
    "text": "7.3 Categorizing Exposure dentist_grp\n\n\nCode\nsummary(chr_1$dentist_grp)\n\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's \n0.00000 0.02760 0.04391 0.04867 0.06495 0.81642      87 \n\n\nWe will use the first quartile (0.028) and third quartile (0.065) as cut points to dichotomize the dentist_grp variable.\n\n\nCode\nchr_1 &lt;- chr_1 |&gt;\n  mutate(dentist_grp = case_when(\n    dentist_grp &lt;= 0.02760 ~ \"Low\",\n    dentist_grp &gt;= 0.06495 ~ \"High\")) |&gt;\n  mutate(dentist_grp = factor(dentist_grp))\n\nchr_1 |&gt; count(dentist_grp)\n\n\n# A tibble: 3 × 2\n  dentist_grp     n\n  &lt;fct&gt;       &lt;int&gt;\n1 High          777\n2 Low           777\n3 &lt;NA&gt;         1641\n\n\n\n\nCode\nchr_1 &lt;- chr_1 |&gt;\n  mutate(dentist_n = as.numeric(dentist_grp),\n         dentist_n = dentist_n - 1)\n\nchr_1 |&gt; count(dentist_n)\n\n\n# A tibble: 3 × 2\n  dentist_n     n\n      &lt;dbl&gt; &lt;int&gt;\n1         0   777\n2         1   777\n3        NA  1641\n\n\nWe have 777 counties in each group.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#numeric-summaries-before-imputation",
    "href": "project_06.html#numeric-summaries-before-imputation",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "7.4 Numeric Summaries Before Imputation",
    "text": "7.4 Numeric Summaries Before Imputation\n\n\nCode\ndescribe(chr_1)\n\n\nchr_1 \n\n 35  Variables      3195  Observations\n--------------------------------------------------------------------------------\nfipscode \n       n  missing distinct \n    3195        0     3195 \n\nlowest : 00000 01000 01001 01003 01005, highest: 56037 56039 56041 56043 56045\n--------------------------------------------------------------------------------\npoor_health \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0      237        1   0.1768    0.174  0.05052   0.1160 \n     .10      .25      .50      .75      .90      .95 \n  0.1254   0.1420   0.1680   0.2070   0.2380   0.2580 \n\nlowest : 0.084 0.087 0.089 0.091 0.093, highest: 0.351 0.359 0.364 0.375 0.38 \n--------------------------------------------------------------------------------\npoor_physical \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3194        1    3.888    3.871    0.734    2.915 \n     .10      .25      .50      .75      .90      .95 \n   3.065    3.385    3.866    4.333    4.739    4.977 \n\nlowest : 2.26179 2.33164 2.39068 2.3946  2.41979\nhighest: 6.08336 6.0868  6.1734  6.44954 6.83683\n--------------------------------------------------------------------------------\npoor_mental \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3194        1    5.212    5.219   0.6926    4.122 \n     .10      .25      .50      .75      .90      .95 \n   4.410    4.814    5.229    5.626    5.990    6.194 \n\nlowest : 3.18554 3.21723 3.53009 3.54504 3.54712\nhighest: 7.07808 7.15042 7.17393 7.30487 7.38881\n--------------------------------------------------------------------------------\nfood_index \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3160       35       82    0.999    7.543     7.65    1.291      5.3 \n     .10      .25      .50      .75      .90      .95 \n     6.1      6.9      7.7      8.4      8.9      9.2 \n\nlowest : 0   0.9 1.3 1.4 1.6, highest: 9.6 9.7 9.8 9.9 10 \n--------------------------------------------------------------------------------\nuninsured \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3194        1     3190        1   0.1149   0.1099  0.05717  0.05144 \n     .10      .25      .50      .75      .90      .95 \n 0.05934  0.07462  0.10340  0.14548  0.18739  0.21667 \n\nlowest : 0.0238974 0.0241492 0.024785  0.0268813 0.0279943\nhighest: 0.323534  0.324548  0.327475  0.387124  0.463235 \n--------------------------------------------------------------------------------\nprimary_care \n        n   missing  distinct      Info      Mean   pMedian       Gmd       .05 \n     3038       157      2942         1 0.0005389 0.0005031   0.00037 0.0001039 \n      .10       .25       .50       .75       .90       .95 \n0.0001689 0.0002974 0.0004740 0.0007176 0.0009665 0.0011567 \n\nlowest : 0           3.43867e-05 3.93043e-05 3.98311e-05 4.38462e-05\nhighest: 0.00284638  0.00289715  0.00296695  0.00507614  0.00580527 \n--------------------------------------------------------------------------------\nmental_care \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3010      185     3001        1     1344    907.7     1536    162.8 \n     .10      .25      .50      .75      .90      .95 \n   220.2    368.0    692.9   1547.6   2999.5   4792.8 \n\nlowest :  -931  -919  -884  -865  -849, highest: 15654 17550 19935 22593 23044\n--------------------------------------------------------------------------------\nsome_college \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3185        1   0.5902   0.5918   0.1336   0.3936 \n     .10      .25      .50      .75      .90      .95 \n  0.4370   0.5110   0.5921   0.6753   0.7368   0.7746 \n\nlowest : 0.117647 0.122152 0.208128 0.228007 0.236698\nhighest: 0.925572 0.926316 0.930521 0.992308 1       \n--------------------------------------------------------------------------------\nunemployment \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3194        1     3181        1  0.03592  0.03482  0.01286  0.02035 \n     .10      .25      .50      .75      .90      .95 \n 0.02277  0.02730  0.03415  0.04201  0.05064  0.05705 \n\nlowest : 0.00572082 0.00859107 0.0131761  0.0133748  0.0134731 \nhighest: 0.116036   0.125495   0.129104   0.130016   0.146677  \n--------------------------------------------------------------------------------\nincome_inequality \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3180       15     3179        1    4.553    4.481   0.8517    3.527 \n     .10      .25      .50      .75      .90      .95 \n   3.706    4.019    4.436    4.945    5.544    6.009 \n\nlowest : 1.65164 2.26575 2.41043 2.53293 2.57027\nhighest: 8.82769 9.19356 9.30925 9.51399 10.5323\n--------------------------------------------------------------------------------\nsocial_score \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3013        1    11.28    10.94    6.154    2.174 \n     .10      .25      .50      .75      .90      .95 \n   5.182    7.892   10.767   14.073   17.901   21.240 \n\nlowest : 0        0.556783 0.931619 1.75186  1.84139 \nhighest: 41.0034  41.9162  43.4783  48.2245  59.4354 \n--------------------------------------------------------------------------------\nlife_expectancy \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3122       73     3121        1    75.78    75.82    3.768    70.54 \n     .10      .25      .50      .75      .90      .95 \n   71.63    73.61    75.88    78.02    79.81    81.00 \n\nlowest : 55.919  60.1049 61.1734 61.3558 61.3605\nhighest: 89.3706 91.1526 92.7249 93.0018 98.9029\n--------------------------------------------------------------------------------\ndiabetes \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0      138        1   0.1056   0.1035  0.02444    0.076 \n     .10      .25      .50      .75      .90      .95 \n   0.081    0.089    0.102    0.118    0.134    0.147 \n\nlowest : 0.056 0.058 0.06  0.062 0.063, highest: 0.203 0.204 0.205 0.216 0.222\n--------------------------------------------------------------------------------\ninsuff_sleep \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3192        3      256        1   0.3445    0.344  0.04103   0.2860 \n     .10      .25      .50      .75      .90      .95 \n  0.2980   0.3190   0.3440   0.3680   0.3929   0.4070 \n\nlowest : 0.238 0.24  0.247 0.248 0.249, highest: 0.46  0.463 0.465 0.469 0.484\n--------------------------------------------------------------------------------\nhighschool_grad \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    2517      678     1637        1   0.8834   0.8905  0.06992   0.7637 \n     .10      .25      .50      .75      .90      .95 \n  0.8003   0.8538   0.8942   0.9258   0.9550   0.9706 \n\nlowest : 0.175    0.221452 0.336957 0.425    0.475   \nhighest: 0.979681 0.98     0.981393 0.989176 0.995   \n--------------------------------------------------------------------------------\nsegregation \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    2128     1067     2126        1    49.61    49.95    19.09    20.70 \n     .10      .25      .50      .75      .90      .95 \n   26.69    38.31    50.88    61.29    71.35    76.25 \n\nlowest : 1.05295 1.06989 1.59135 1.67271 1.96799\nhighest: 88.7365 88.9926 89.8186 89.9605 93.7638\n--------------------------------------------------------------------------------\nhome_ownership \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3191        1   0.7261   0.7333  0.09183   0.5686 \n     .10      .25      .50      .75      .90      .95 \n  0.6194   0.6826   0.7388   0.7839   0.8194   0.8371 \n\nlowest : 0        0.157895 0.199638 0.243232 0.276574\nhighest: 0.912844 0.923458 0.933333 0.933466 0.969858\n--------------------------------------------------------------------------------\nhousing_burden \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3190        5     3179        1   0.1095   0.1072   0.0387  0.06053 \n     .10      .25      .50      .75      .90      .95 \n 0.07002  0.08552  0.10478  0.12855  0.15675  0.17516 \n\nlowest : 0.00595238 0.00878477 0.00996678 0.0159657  0.0185874 \nhighest: 0.25323    0.255763   0.2584     0.281928   0.311692  \n--------------------------------------------------------------------------------\nbelow_18 \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3193        1   0.2166   0.2164  0.03757   0.1615 \n     .10      .25      .50      .75      .90      .95 \n  0.1746   0.1966   0.2173   0.2353   0.2537   0.2696 \n\nlowest : 0.0243902 0.0354663 0.0493957 0.0570924 0.0711527\nhighest: 0.369018  0.375724  0.381907  0.414208  0.420995 \n--------------------------------------------------------------------------------\nabove_65 \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3189        1   0.2046    0.202  0.05296   0.1324 \n     .10      .25      .50      .75      .90      .95 \n  0.1483   0.1734   0.2008   0.2304   0.2665   0.2920 \n\nlowest : 0.0544279 0.0629911 0.0684948 0.0737527 0.0755564\nhighest: 0.414013  0.417121  0.424593  0.435067  0.574546 \n--------------------------------------------------------------------------------\nblack \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3187        1  0.09037  0.04868   0.1235 0.004405 \n     .10      .25      .50      .75      .90      .95 \n0.005453 0.008516 0.023844 0.103048 0.292486 0.410786 \n\nlowest : 0           0.000646134 0.000772201 0.000950119 0.000986193\nhighest: 0.787643    0.790084    0.821227    0.845068    0.851448   \n--------------------------------------------------------------------------------\nnative \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3190        1  0.02449 0.009342  0.03517 0.002600 \n     .10      .25      .50      .75      .90      .95 \n0.003159 0.004443 0.007416 0.014790 0.036667 0.084503 \n\nlowest : 0           0.000555247 0.000785376 0.00115182  0.0011554  \nhighest: 0.810833    0.844577    0.848004    0.895259    0.921116   \n--------------------------------------------------------------------------------\nasian \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3184        1  0.01755  0.01038     0.02 0.002817 \n     .10      .25      .50      .75      .90      .95 \n0.003649 0.005451 0.008366 0.016349 0.036610 0.061040 \n\nlowest : 0           0.000563063 0.00061757  0.000723589 0.000817184\nhighest: 0.372693    0.385787    0.414258    0.425768    0.463802   \n--------------------------------------------------------------------------------\nhispanic \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3194        1   0.1045  0.06686   0.1171  0.01596 \n     .10      .25      .50      .75      .90      .95 \n 0.01953  0.02863  0.05158  0.11195  0.25909  0.40959 \n\nlowest : 0.00662915 0.00732961 0.00762389 0.00768806 0.00772813\nhighest: 0.936973   0.948533   0.950321   0.952917   0.960641  \n--------------------------------------------------------------------------------\nwhite \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3193        1   0.7468   0.7698   0.2173   0.3256 \n     .10      .25      .50      .75      .90      .95 \n  0.4383   0.6286   0.8172   0.9121   0.9414   0.9520 \n\nlowest : 0.0269389 0.0284045 0.0345667 0.03594   0.0400751\nhighest: 0.972168  0.972469  0.97272   0.9754    0.975858 \n--------------------------------------------------------------------------------\nfemale \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     3192        1   0.4952   0.4982  0.02076   0.4596 \n     .10      .25      .50      .75      .90      .95 \n  0.4747   0.4899   0.4988   0.5065   0.5140   0.5201 \n\nlowest : 0.215686 0.270395 0.287504 0.291292 0.301648\nhighest: 0.544438 0.546502 0.547111 0.548661 0.577624\n--------------------------------------------------------------------------------\nrural \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0     2066    0.959   0.6347    0.639   0.3791  0.05155 \n     .10      .25      .50      .75      .90      .95 \n 0.13787  0.34769  0.65675  1.00000  1.00000  1.00000 \n\nlowest : 0           6.79046e-07 3.07633e-05 3.99956e-05 4.51164e-05\nhighest: 0.998927    0.998929    0.999886    0.99994     1          \n--------------------------------------------------------------------------------\ninactivity \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0      280        1    0.266    0.265  0.05883    0.184 \n     .10      .25      .50      .75      .90      .95 \n   0.200    0.230    0.262    0.300    0.333    0.357 \n\nlowest : 0.12  0.121 0.122 0.123 0.13 , highest: 0.443 0.45  0.456 0.457 0.47 \n--------------------------------------------------------------------------------\nobesity \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3195        0      271        1   0.3729   0.3755  0.05027    0.287 \n     .10      .25      .50      .75      .90      .95 \n   0.314    0.350    0.376    0.402    0.427    0.439 \n\nlowest : 0.174 0.185 0.187 0.197 0.201, highest: 0.509 0.51  0.512 0.52  0.525\n--------------------------------------------------------------------------------\nhousehold_income \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3194        1     3101        1    63449    61837    17240    42604 \n     .10      .25      .50      .75      .90      .95 \n   45708    52610    60986    70897    83207    94785 \n\nlowest :  28972  30659  30688  31972  32783, highest: 142513 143795 144632 150502 167605\n--------------------------------------------------------------------------------\ndentist_grp \n       n  missing distinct \n    1554     1641        2 \n                    \nValue      High  Low\nFrequency   777  777\nProportion  0.5  0.5\n--------------------------------------------------------------------------------\nsmoking_prop \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3192        3     3191        1    17.87    17.71    4.014    12.96 \n     .10      .25      .50      .75      .90      .95 \n   13.84    15.23    17.31    20.28    22.44    23.85 \n\nlowest : 6.73543 6.82175 7.16927 7.68742 7.73646\nhighest: 37.029  38.3231 39.0797 41.2018 42.7541\n--------------------------------------------------------------------------------\ndrinking_prop \n       n  missing distinct     Info     Mean  pMedian      Gmd      .05 \n    3192        3     3191        1    17.43    17.39    3.677    12.29 \n     .10      .25      .50      .75      .90      .95 \n   13.14    15.10    17.40    19.68    21.47    22.92 \n\nlowest : 9.26516 9.28781 9.40767 9.48465 9.52642\nhighest: 27.8133 28.0047 28.0822 28.1579 29.4401\n--------------------------------------------------------------------------------\ndentist_n \n       n  missing distinct     Info      Sum     Mean \n    1554     1641        2     0.75      777      0.5 \n\n--------------------------------------------------------------------------------",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#dealing-with-missingness",
    "href": "project_06.html#dealing-with-missingness",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "7.5 Dealing with Missingness",
    "text": "7.5 Dealing with Missingness\n\n\nCode\nmiss_var_summary(chr_1)\n\n\n# A tibble: 35 × 3\n   variable          n_miss pct_miss\n   &lt;chr&gt;              &lt;int&gt;    &lt;num&gt;\n 1 dentist_grp         1641   51.4  \n 2 dentist_n           1641   51.4  \n 3 segregation         1067   33.4  \n 4 highschool_grad      678   21.2  \n 5 mental_care          185    5.79 \n 6 primary_care         157    4.91 \n 7 life_expectancy       73    2.28 \n 8 food_index            35    1.10 \n 9 income_inequality     15    0.469\n10 housing_burden         5    0.156\n# ℹ 25 more rows\n\n\nThe segregation variable constitutes 33.4% of the missing data, followed by highschool_grd (21.2%), mental_care (5.79%), primary_care (4.91%), life_expectancy (2.28%), food_index (1.10%). Other variables with minimal missingness (&lt;1%) include income_inequality, housing_burden, insuff_sleep, uninsured, unemployment, household_income.\n\n7.5.1 Filter Complete Cases For Exposure dentist_prop\nWe will remove missing cases for the exposure dentist_prop and name the set chr24_si.\n\n\nCode\nchr_simp &lt;- chr_1 |&gt;\n  filter(!is.na(dentist_grp))|&gt;\n  filter(!is.na(dentist_n))\n\n\n\n\nCode\nn_miss(chr_simp$dentist_n)\n\n\n[1] 0\n\n\nThe outcome variable has no missing values. Now we will deal with the missing values in the covariates.\n\n\n7.5.2 Single Imputation for Covariates\nWe will use the mice function from the mice package to perform single imputation for all variables in the chr24_si data set.\n\n\nCode\nchr_simp &lt;- \n  mice(chr_simp, m = 1, seed = 500, print = FALSE) |&gt;\n  complete() |&gt;\n  tibble()\n\n\nWarning: Number of logged events: 67\n\n\n\n\nCode\nmiss_var_summary(chr_simp)\n\n\n# A tibble: 35 × 3\n   variable      n_miss pct_miss\n   &lt;chr&gt;          &lt;int&gt;    &lt;num&gt;\n 1 fipscode           0        0\n 2 poor_health        0        0\n 3 poor_physical      0        0\n 4 poor_mental        0        0\n 5 food_index         0        0\n 6 uninsured          0        0\n 7 primary_care       0        0\n 8 mental_care        0        0\n 9 some_college       0        0\n10 unemployment       0        0\n# ℹ 25 more rows\n\n\nThere are no missing observation in the semi-final working data set chr_simp.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#check-correlation",
    "href": "project_06.html#check-correlation",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "8.1 Check Correlation",
    "text": "8.1 Check Correlation\n\n\nCode\nres &lt;- correlation(chr_simp, method = \"spearman\")\n\nres\n\n\n# Correlation Matrix (spearman-method)\n\nParameter1        |        Parameter2 |       rho |         95% CI |        S |         p\n-----------------------------------------------------------------------------------------\npoor_health       |     poor_physical |      0.94 | [ 0.93,  0.95] | 3.77e+07 | &lt; .001***\npoor_health       |       poor_mental |      0.75 | [ 0.73,  0.77] | 1.54e+08 | &lt; .001***\npoor_health       |        food_index |     -0.68 | [-0.70, -0.65] | 1.05e+09 | &lt; .001***\npoor_health       |         uninsured |      0.54 | [ 0.51,  0.58] | 2.85e+08 | &lt; .001***\npoor_health       |      primary_care |     -0.40 | [-0.44, -0.36] | 8.75e+08 | &lt; .001***\npoor_health       |       mental_care |      0.37 | [ 0.33,  0.42] | 3.93e+08 | &lt; .001***\npoor_health       |      some_college |     -0.79 | [-0.81, -0.77] | 1.12e+09 | &lt; .001***\npoor_health       |      unemployment |      0.47 | [ 0.43,  0.51] | 3.29e+08 | &lt; .001***\npoor_health       | income_inequality |      0.45 | [ 0.41,  0.49] | 3.41e+08 | &lt; .001***\npoor_health       |      social_score |     -0.13 | [-0.18, -0.08] | 7.05e+08 | &lt; .001***\npoor_health       |   life_expectancy |     -0.81 | [-0.83, -0.79] | 1.13e+09 | &lt; .001***\npoor_health       |          diabetes |      0.94 | [ 0.93,  0.94] | 3.96e+07 | &lt; .001***\npoor_health       |      insuff_sleep |      0.79 | [ 0.77,  0.80] | 1.34e+08 | &lt; .001***\npoor_health       |   highschool_grad |      0.01 | [-0.04,  0.06] | 6.18e+08 | &gt; .999   \npoor_health       |       segregation |     -0.30 | [-0.35, -0.25] | 8.14e+08 | &lt; .001***\npoor_health       |    home_ownership |     -0.06 | [-0.11, -0.01] | 6.62e+08 | &gt; .999   \npoor_health       |    housing_burden |  1.45e-03 | [-0.05,  0.05] | 6.25e+08 | &gt; .999   \npoor_health       |          below_18 |      0.16 | [ 0.11,  0.21] | 5.25e+08 | &lt; .001***\npoor_health       |          above_65 |     -0.10 | [-0.15, -0.04] | 6.85e+08 | 0.021*   \npoor_health       |             black |      0.30 | [ 0.25,  0.35] | 4.38e+08 | &lt; .001***\npoor_health       |            native | -7.28e-03 | [-0.06,  0.04] | 6.30e+08 | &gt; .999   \npoor_health       |             asian |     -0.36 | [-0.41, -0.32] | 8.53e+08 | &lt; .001***\npoor_health       |          hispanic |     -0.06 | [-0.11, -0.01] | 6.62e+08 | &gt; .999   \npoor_health       |             white |     -0.29 | [-0.34, -0.25] | 8.09e+08 | &lt; .001***\npoor_health       |            female |      0.05 | [ 0.00,  0.10] | 5.94e+08 | &gt; .999   \npoor_health       |             rural |      0.33 | [ 0.28,  0.37] | 4.21e+08 | &lt; .001***\npoor_health       |        inactivity |      0.88 | [ 0.87,  0.89] | 7.60e+07 | &lt; .001***\npoor_health       |           obesity |      0.69 | [ 0.66,  0.71] | 1.96e+08 | &lt; .001***\npoor_health       |  household_income |     -0.78 | [-0.80, -0.76] | 1.11e+09 | &lt; .001***\npoor_health       |      smoking_prop |      0.71 | [ 0.69,  0.74] | 1.80e+08 | &lt; .001***\npoor_health       |     drinking_prop |     -0.69 | [-0.72, -0.66] | 1.06e+09 | &lt; .001***\npoor_health       |         dentist_n |      0.44 | [ 0.39,  0.48] | 3.53e+08 | &lt; .001***\npoor_physical     |       poor_mental |      0.85 | [ 0.84,  0.87] | 9.12e+07 | &lt; .001***\npoor_physical     |        food_index |     -0.64 | [-0.67, -0.61] | 1.03e+09 | &lt; .001***\npoor_physical     |         uninsured |      0.46 | [ 0.42,  0.50] | 3.38e+08 | &lt; .001***\npoor_physical     |      primary_care |     -0.41 | [-0.45, -0.36] | 8.80e+08 | &lt; .001***\npoor_physical     |       mental_care |      0.35 | [ 0.31,  0.40] | 4.04e+08 | &lt; .001***\npoor_physical     |      some_college |     -0.78 | [-0.80, -0.76] | 1.11e+09 | &lt; .001***\npoor_physical     |      unemployment |      0.47 | [ 0.43,  0.51] | 3.32e+08 | &lt; .001***\npoor_physical     | income_inequality |      0.40 | [ 0.36,  0.44] | 3.75e+08 | &lt; .001***\npoor_physical     |      social_score |     -0.17 | [-0.22, -0.12] | 7.32e+08 | &lt; .001***\npoor_physical     |   life_expectancy |     -0.80 | [-0.82, -0.78] | 1.12e+09 | &lt; .001***\npoor_physical     |          diabetes |      0.82 | [ 0.81,  0.84] | 1.10e+08 | &lt; .001***\npoor_physical     |      insuff_sleep |      0.76 | [ 0.74,  0.78] | 1.50e+08 | &lt; .001***\npoor_physical     |   highschool_grad |      0.04 | [-0.01,  0.09] | 5.98e+08 | &gt; .999   \npoor_physical     |       segregation |     -0.25 | [-0.29, -0.20] | 7.79e+08 | &lt; .001***\npoor_physical     |    home_ownership |  9.49e-03 | [-0.04,  0.06] | 6.20e+08 | &gt; .999   \npoor_physical     |    housing_burden |     -0.03 | [-0.08,  0.02] | 6.45e+08 | &gt; .999   \npoor_physical     |          below_18 |      0.10 | [ 0.05,  0.15] | 5.63e+08 | 0.010*   \npoor_physical     |          above_65 |     -0.04 | [-0.09,  0.01] | 6.50e+08 | &gt; .999   \npoor_physical     |             black |      0.18 | [ 0.13,  0.23] | 5.10e+08 | &lt; .001***\npoor_physical     |            native |     -0.04 | [-0.09,  0.02] | 6.48e+08 | &gt; .999   \npoor_physical     |             asian |     -0.40 | [-0.44, -0.35] | 8.74e+08 | &lt; .001***\npoor_physical     |          hispanic |     -0.16 | [-0.21, -0.11] | 7.24e+08 | &lt; .001***\npoor_physical     |             white |     -0.12 | [-0.17, -0.07] | 7.00e+08 | &lt; .001***\npoor_physical     |            female |      0.02 | [-0.03,  0.08] | 6.10e+08 | &gt; .999   \npoor_physical     |             rural |      0.34 | [ 0.30,  0.39] | 4.11e+08 | &lt; .001***\npoor_physical     |        inactivity |      0.80 | [ 0.78,  0.82] | 1.26e+08 | &lt; .001***\npoor_physical     |           obesity |      0.61 | [ 0.58,  0.65] | 2.41e+08 | &lt; .001***\npoor_physical     |  household_income |     -0.75 | [-0.77, -0.73] | 1.10e+09 | &lt; .001***\npoor_physical     |      smoking_prop |      0.74 | [ 0.72,  0.76] | 1.61e+08 | &lt; .001***\npoor_physical     |     drinking_prop |     -0.68 | [-0.70, -0.65] | 1.05e+09 | &lt; .001***\npoor_physical     |         dentist_n |      0.43 | [ 0.39,  0.47] | 3.55e+08 | &lt; .001***\npoor_mental       |        food_index |     -0.52 | [-0.56, -0.48] | 9.52e+08 | &lt; .001***\npoor_mental       |         uninsured |      0.26 | [ 0.21,  0.31] | 4.61e+08 | &lt; .001***\npoor_mental       |      primary_care |     -0.25 | [-0.29, -0.20] | 7.79e+08 | &lt; .001***\npoor_mental       |       mental_care |      0.18 | [ 0.13,  0.23] | 5.11e+08 | &lt; .001***\npoor_mental       |      some_college |     -0.59 | [-0.62, -0.55] | 9.94e+08 | &lt; .001***\npoor_mental       |      unemployment |      0.46 | [ 0.42,  0.50] | 3.36e+08 | &lt; .001***\npoor_mental       | income_inequality |      0.39 | [ 0.35,  0.44] | 3.79e+08 | &lt; .001***\npoor_mental       |      social_score |     -0.16 | [-0.21, -0.11] | 7.26e+08 | &lt; .001***\npoor_mental       |   life_expectancy |     -0.68 | [-0.71, -0.65] | 1.05e+09 | &lt; .001***\npoor_mental       |          diabetes |      0.65 | [ 0.61,  0.67] | 2.22e+08 | &lt; .001***\npoor_mental       |      insuff_sleep |      0.68 | [ 0.66,  0.71] | 1.98e+08 | &lt; .001***\npoor_mental       |   highschool_grad |  4.24e-03 | [-0.05,  0.06] | 6.23e+08 | &gt; .999   \npoor_mental       |       segregation |     -0.16 | [-0.21, -0.11] | 7.23e+08 | &lt; .001***\npoor_mental       |    home_ownership |     -0.03 | [-0.08,  0.02] | 6.44e+08 | &gt; .999   \npoor_mental       |    housing_burden |      0.08 | [ 0.03,  0.13] | 5.77e+08 | 0.251    \npoor_mental       |          below_18 |     -0.03 | [-0.08,  0.02] | 6.44e+08 | &gt; .999   \npoor_mental       |          above_65 |     -0.03 | [-0.08,  0.02] | 6.46e+08 | &gt; .999   \npoor_mental       |             black |      0.19 | [ 0.14,  0.24] | 5.08e+08 | &lt; .001***\npoor_mental       |            native |     -0.09 | [-0.14, -0.04] | 6.81e+08 | 0.051    \npoor_mental       |             asian |     -0.25 | [-0.29, -0.20] | 7.79e+08 | &lt; .001***\npoor_mental       |          hispanic |     -0.16 | [-0.21, -0.11] | 7.27e+08 | &lt; .001***\npoor_mental       |             white |     -0.05 | [-0.10,  0.00] | 6.57e+08 | &gt; .999   \npoor_mental       |            female |      0.18 | [ 0.13,  0.23] | 5.14e+08 | &lt; .001***\npoor_mental       |             rural |      0.17 | [ 0.12,  0.22] | 5.17e+08 | &lt; .001***\npoor_mental       |        inactivity |      0.56 | [ 0.53,  0.60] | 2.72e+08 | &lt; .001***\npoor_mental       |           obesity |      0.41 | [ 0.37,  0.45] | 3.68e+08 | &lt; .001***\npoor_mental       |  household_income |     -0.59 | [-0.62, -0.56] | 9.94e+08 | &lt; .001***\npoor_mental       |      smoking_prop |      0.63 | [ 0.60,  0.66] | 2.32e+08 | &lt; .001***\npoor_mental       |     drinking_prop |     -0.56 | [-0.59, -0.52] | 9.75e+08 | &lt; .001***\npoor_mental       |         dentist_n |      0.28 | [ 0.23,  0.32] | 4.52e+08 | &lt; .001***\nfood_index        |         uninsured |     -0.49 | [-0.52, -0.45] | 9.29e+08 | &lt; .001***\nfood_index        |      primary_care |      0.31 | [ 0.26,  0.35] | 4.34e+08 | &lt; .001***\nfood_index        |       mental_care |     -0.12 | [-0.17, -0.07] | 7.02e+08 | &lt; .001***\nfood_index        |      some_college |      0.49 | [ 0.45,  0.53] | 3.18e+08 | &lt; .001***\nfood_index        |      unemployment |     -0.36 | [-0.40, -0.31] | 8.49e+08 | &lt; .001***\nfood_index        | income_inequality |     -0.36 | [-0.40, -0.31] | 8.50e+08 | &lt; .001***\nfood_index        |      social_score |      0.15 | [ 0.10,  0.20] | 5.31e+08 | &lt; .001***\nfood_index        |   life_expectancy |      0.59 | [ 0.56,  0.62] | 2.57e+08 | &lt; .001***\nfood_index        |          diabetes |     -0.63 | [-0.66, -0.60] | 1.02e+09 | &lt; .001***\nfood_index        |      insuff_sleep |     -0.45 | [-0.49, -0.41] | 9.06e+08 | &lt; .001***\nfood_index        |   highschool_grad |      0.07 | [ 0.02,  0.12] | 5.81e+08 | 0.490    \nfood_index        |       segregation |      0.12 | [ 0.07,  0.17] | 5.52e+08 | &lt; .001***\nfood_index        |    home_ownership |      0.10 | [ 0.05,  0.15] | 5.65e+08 | 0.020*   \nfood_index        |    housing_burden |  2.06e-03 | [-0.05,  0.05] | 6.24e+08 | &gt; .999   \nfood_index        |          below_18 |     -0.09 | [-0.15, -0.04] | 6.85e+08 | 0.024*   \nfood_index        |          above_65 |     -0.07 | [-0.12, -0.02] | 6.72e+08 | 0.359    \nfood_index        |             black |     -0.07 | [-0.12, -0.02] | 6.71e+08 | 0.391    \nfood_index        |            native |     -0.14 | [-0.19, -0.09] | 7.12e+08 | &lt; .001***\nfood_index        |             asian |      0.34 | [ 0.29,  0.38] | 4.14e+08 | &lt; .001***\nfood_index        |          hispanic |      0.03 | [-0.02,  0.08] | 6.08e+08 | &gt; .999   \nfood_index        |             white |      0.17 | [ 0.11,  0.21] | 5.22e+08 | &lt; .001***\nfood_index        |            female |      0.02 | [-0.03,  0.07] | 6.14e+08 | &gt; .999   \nfood_index        |             rural |     -0.31 | [-0.36, -0.27] | 8.22e+08 | &lt; .001***\nfood_index        |        inactivity |     -0.59 | [-0.62, -0.55] | 9.93e+08 | &lt; .001***\nfood_index        |           obesity |     -0.49 | [-0.53, -0.45] | 9.32e+08 | &lt; .001***\nfood_index        |  household_income |      0.70 | [ 0.68,  0.73] | 1.85e+08 | &lt; .001***\nfood_index        |      smoking_prop |     -0.51 | [-0.54, -0.47] | 9.42e+08 | &lt; .001***\nfood_index        |     drinking_prop |      0.49 | [ 0.45,  0.53] | 3.18e+08 | &lt; .001***\nfood_index        |         dentist_n |     -0.30 | [-0.35, -0.25] | 8.14e+08 | &lt; .001***\nuninsured         |      primary_care |     -0.32 | [-0.36, -0.27] | 8.23e+08 | &lt; .001***\nuninsured         |       mental_care |      0.37 | [ 0.32,  0.41] | 3.97e+08 | &lt; .001***\nuninsured         |      some_college |     -0.51 | [-0.54, -0.47] | 9.42e+08 | &lt; .001***\nuninsured         |      unemployment |      0.01 | [-0.04,  0.06] | 6.19e+08 | &gt; .999   \nuninsured         | income_inequality |      0.14 | [ 0.09,  0.19] | 5.40e+08 | &lt; .001***\nuninsured         |      social_score |     -0.05 | [-0.10,  0.00] | 6.57e+08 | &gt; .999   \nuninsured         |   life_expectancy |     -0.40 | [-0.44, -0.36] | 8.77e+08 | &lt; .001***\nuninsured         |          diabetes |      0.54 | [ 0.50,  0.57] | 2.89e+08 | &lt; .001***\nuninsured         |      insuff_sleep |      0.27 | [ 0.22,  0.32] | 4.56e+08 | &lt; .001***\nuninsured         |   highschool_grad |      0.03 | [-0.02,  0.08] | 6.05e+08 | &gt; .999   \nuninsured         |       segregation |     -0.27 | [-0.31, -0.22] | 7.92e+08 | &lt; .001***\nuninsured         |    home_ownership |      0.02 | [-0.04,  0.07] | 6.16e+08 | &gt; .999   \nuninsured         |    housing_burden |     -0.13 | [-0.18, -0.08] | 7.05e+08 | &lt; .001***\nuninsured         |          below_18 |      0.25 | [ 0.20,  0.29] | 4.71e+08 | &lt; .001***\nuninsured         |          above_65 |     -0.03 | [-0.08,  0.02] | 6.42e+08 | &gt; .999   \nuninsured         |             black |      0.08 | [ 0.02,  0.13] | 5.78e+08 | 0.316    \nuninsured         |            native |      0.37 | [ 0.33,  0.41] | 3.94e+08 | &lt; .001***\nuninsured         |             asian |     -0.24 | [-0.29, -0.19] | 7.75e+08 | &lt; .001***\nuninsured         |          hispanic |      0.26 | [ 0.22,  0.31] | 4.60e+08 | &lt; .001***\nuninsured         |             white |     -0.36 | [-0.40, -0.31] | 8.49e+08 | &lt; .001***\nuninsured         |            female |     -0.10 | [-0.15, -0.05] | 6.88e+08 | 0.010**  \nuninsured         |             rural |      0.36 | [ 0.31,  0.40] | 4.00e+08 | &lt; .001***\nuninsured         |        inactivity |      0.46 | [ 0.42,  0.50] | 3.35e+08 | &lt; .001***\nuninsured         |           obesity |      0.31 | [ 0.27,  0.36] | 4.29e+08 | &lt; .001***\nuninsured         |  household_income |     -0.41 | [-0.45, -0.37] | 8.83e+08 | &lt; .001***\nuninsured         |      smoking_prop |      0.25 | [ 0.20,  0.29] | 4.71e+08 | &lt; .001***\nuninsured         |     drinking_prop |     -0.45 | [-0.49, -0.41] | 9.06e+08 | &lt; .001***\nuninsured         |         dentist_n |      0.39 | [ 0.34,  0.43] | 3.84e+08 | &lt; .001***\nprimary_care      |       mental_care |     -0.50 | [-0.54, -0.46] | 9.38e+08 | &lt; .001***\nprimary_care      |      some_college |      0.49 | [ 0.45,  0.52] | 3.22e+08 | &lt; .001***\nprimary_care      |      unemployment |     -0.09 | [-0.14, -0.04] | 6.80e+08 | 0.065    \nprimary_care      | income_inequality |      0.05 | [ 0.00,  0.10] | 5.95e+08 | &gt; .999   \nprimary_care      |      social_score |      0.14 | [ 0.09,  0.19] | 5.37e+08 | &lt; .001***\nprimary_care      |   life_expectancy |      0.34 | [ 0.29,  0.38] | 4.13e+08 | &lt; .001***\nprimary_care      |          diabetes |     -0.34 | [-0.38, -0.29] | 8.38e+08 | &lt; .001***\nprimary_care      |      insuff_sleep |     -0.31 | [-0.35, -0.26] | 8.19e+08 | &lt; .001***\nprimary_care      |   highschool_grad |     -0.17 | [-0.22, -0.12] | 7.30e+08 | &lt; .001***\nprimary_care      |       segregation |      0.25 | [ 0.20,  0.29] | 4.71e+08 | &lt; .001***\nprimary_care      |    home_ownership |     -0.39 | [-0.43, -0.35] | 8.70e+08 | &lt; .001***\nprimary_care      |    housing_burden |      0.32 | [ 0.28,  0.37] | 4.24e+08 | &lt; .001***\nprimary_care      |          below_18 |     -0.10 | [-0.15, -0.05] | 6.88e+08 | 0.011*   \nprimary_care      |          above_65 |     -0.17 | [-0.21, -0.11] | 7.29e+08 | &lt; .001***\nprimary_care      |             black |      0.03 | [-0.02,  0.08] | 6.07e+08 | &gt; .999   \nprimary_care      |            native |  6.63e-03 | [-0.04,  0.06] | 6.21e+08 | &gt; .999   \nprimary_care      |             asian |      0.54 | [ 0.50,  0.57] | 2.88e+08 | &lt; .001***\nprimary_care      |          hispanic |      0.17 | [ 0.12,  0.22] | 5.21e+08 | &lt; .001***\nprimary_care      |             white |     -0.12 | [-0.17, -0.07] | 7.00e+08 | &lt; .001***\nprimary_care      |            female |      0.28 | [ 0.23,  0.32] | 4.53e+08 | &lt; .001***\nprimary_care      |             rural |     -0.55 | [-0.59, -0.51] | 9.70e+08 | &lt; .001***\nprimary_care      |        inactivity |     -0.44 | [-0.48, -0.40] | 8.99e+08 | &lt; .001***\nprimary_care      |           obesity |     -0.42 | [-0.46, -0.37] | 8.86e+08 | &lt; .001***\nprimary_care      |  household_income |      0.37 | [ 0.33,  0.42] | 3.92e+08 | &lt; .001***\nprimary_care      |      smoking_prop |     -0.31 | [-0.35, -0.26] | 8.17e+08 | &lt; .001***\nprimary_care      |     drinking_prop |      0.32 | [ 0.28,  0.37] | 4.23e+08 | &lt; .001***\nprimary_care      |         dentist_n |     -0.67 | [-0.69, -0.64] | 1.04e+09 | &lt; .001***\nmental_care       |      some_college |     -0.47 | [-0.50, -0.42] | 9.16e+08 | &lt; .001***\nmental_care       |      unemployment |     -0.02 | [-0.07,  0.03] | 6.40e+08 | &gt; .999   \nmental_care       | income_inequality |     -0.06 | [-0.11,  0.00] | 6.60e+08 | &gt; .999   \nmental_care       |      social_score |      0.10 | [ 0.05,  0.15] | 5.61e+08 | 0.008**  \nmental_care       |   life_expectancy |     -0.31 | [-0.36, -0.27] | 8.21e+08 | &lt; .001***\nmental_care       |          diabetes |      0.34 | [ 0.30,  0.39] | 4.12e+08 | &lt; .001***\nmental_care       |      insuff_sleep |      0.32 | [ 0.28,  0.37] | 4.23e+08 | &lt; .001***\nmental_care       |   highschool_grad |      0.32 | [ 0.27,  0.36] | 4.27e+08 | &lt; .001***\nmental_care       |       segregation |     -0.34 | [-0.39, -0.30] | 8.40e+08 | &lt; .001***\nmental_care       |    home_ownership |      0.48 | [ 0.44,  0.52] | 3.27e+08 | &lt; .001***\nmental_care       |    housing_burden |     -0.42 | [-0.46, -0.37] | 8.86e+08 | &lt; .001***\nmental_care       |          below_18 |      0.12 | [ 0.07,  0.17] | 5.48e+08 | &lt; .001***\nmental_care       |          above_65 |      0.16 | [ 0.11,  0.21] | 5.24e+08 | &lt; .001***\nmental_care       |             black |  7.22e-03 | [-0.04,  0.06] | 6.21e+08 | &gt; .999   \nmental_care       |            native |     -0.11 | [-0.16, -0.06] | 6.95e+08 | 0.002**  \nmental_care       |             asian |     -0.48 | [-0.52, -0.44] | 9.26e+08 | &lt; .001***\nmental_care       |          hispanic |     -0.21 | [-0.25, -0.16] | 7.54e+08 | &lt; .001***\nmental_care       |             white |      0.14 | [ 0.09,  0.19] | 5.37e+08 | &lt; .001***\nmental_care       |            female |     -0.17 | [-0.22, -0.12] | 7.29e+08 | &lt; .001***\nmental_care       |             rural |      0.55 | [ 0.51,  0.58] | 2.83e+08 | &lt; .001***\nmental_care       |        inactivity |      0.45 | [ 0.41,  0.49] | 3.43e+08 | &lt; .001***\nmental_care       |           obesity |      0.43 | [ 0.38,  0.47] | 3.59e+08 | &lt; .001***\nmental_care       |  household_income |     -0.32 | [-0.37, -0.28] | 8.28e+08 | &lt; .001***\nmental_care       |      smoking_prop |      0.25 | [ 0.20,  0.30] | 4.70e+08 | &lt; .001***\nmental_care       |     drinking_prop |     -0.34 | [-0.39, -0.30] | 8.39e+08 | &lt; .001***\nmental_care       |         dentist_n |      0.63 | [ 0.59,  0.66] | 2.34e+08 | &lt; .001***\nsome_college      |      unemployment |     -0.35 | [-0.40, -0.31] | 8.47e+08 | &lt; .001***\nsome_college      | income_inequality |     -0.22 | [-0.27, -0.18] | 7.66e+08 | &lt; .001***\nsome_college      |      social_score |      0.09 | [ 0.04,  0.14] | 5.68e+08 | 0.038*   \nsome_college      |   life_expectancy |      0.66 | [ 0.63,  0.68] | 2.15e+08 | &lt; .001***\nsome_college      |          diabetes |     -0.70 | [-0.72, -0.67] | 1.06e+09 | &lt; .001***\nsome_college      |      insuff_sleep |     -0.62 | [-0.65, -0.58] | 1.01e+09 | &lt; .001***\nsome_college      |   highschool_grad |     -0.05 | [-0.10,  0.00] | 6.58e+08 | &gt; .999   \nsome_college      |       segregation |      0.24 | [ 0.19,  0.29] | 4.74e+08 | &lt; .001***\nsome_college      |    home_ownership |     -0.18 | [-0.22, -0.13] | 7.35e+08 | &lt; .001***\nsome_college      |    housing_burden |      0.17 | [ 0.12,  0.22] | 5.20e+08 | &lt; .001***\nsome_college      |          below_18 |     -0.08 | [-0.13, -0.03] | 6.78e+08 | 0.119    \nsome_college      |          above_65 |     -0.08 | [-0.13, -0.03] | 6.73e+08 | 0.284    \nsome_college      |             black |     -0.11 | [-0.16, -0.06] | 6.94e+08 | 0.002**  \nsome_college      |            native |     -0.05 | [-0.10,  0.00] | 6.56e+08 | &gt; .999   \nsome_college      |             asian |      0.46 | [ 0.42,  0.50] | 3.39e+08 | &lt; .001***\nsome_college      |          hispanic |      0.10 | [ 0.05,  0.15] | 5.64e+08 | 0.015*   \nsome_college      |             white |      0.10 | [ 0.05,  0.15] | 5.65e+08 | 0.018*   \nsome_college      |            female |      0.16 | [ 0.11,  0.21] | 5.27e+08 | &lt; .001***\nsome_college      |             rural |     -0.47 | [-0.51, -0.43] | 9.20e+08 | &lt; .001***\nsome_college      |        inactivity |     -0.74 | [-0.76, -0.72] | 1.09e+09 | &lt; .001***\nsome_college      |           obesity |     -0.58 | [-0.61, -0.54] | 9.88e+08 | &lt; .001***\nsome_college      |  household_income |      0.66 | [ 0.63,  0.69] | 2.12e+08 | &lt; .001***\nsome_college      |      smoking_prop |     -0.58 | [-0.62, -0.55] | 9.90e+08 | &lt; .001***\nsome_college      |     drinking_prop |      0.56 | [ 0.52,  0.59] | 2.77e+08 | &lt; .001***\nsome_college      |         dentist_n |     -0.52 | [-0.56, -0.48] | 9.52e+08 | &lt; .001***\nunemployment      | income_inequality |      0.36 | [ 0.32,  0.41] | 3.98e+08 | &lt; .001***\nunemployment      |      social_score |     -0.15 | [-0.20, -0.10] | 7.22e+08 | &lt; .001***\nunemployment      |   life_expectancy |     -0.39 | [-0.43, -0.34] | 8.68e+08 | &lt; .001***\nunemployment      |          diabetes |      0.41 | [ 0.37,  0.46] | 3.67e+08 | &lt; .001***\nunemployment      |      insuff_sleep |      0.45 | [ 0.41,  0.49] | 3.42e+08 | &lt; .001***\nunemployment      |   highschool_grad |     -0.18 | [-0.23, -0.13] | 7.40e+08 | &lt; .001***\nunemployment      |       segregation |     -0.02 | [-0.07,  0.03] | 6.39e+08 | &gt; .999   \nunemployment      |    home_ownership |     -0.08 | [-0.13, -0.03] | 6.74e+08 | 0.251    \nunemployment      |    housing_burden |      0.23 | [ 0.18,  0.27] | 4.84e+08 | &lt; .001***\nunemployment      |          below_18 |     -0.19 | [-0.24, -0.14] | 7.43e+08 | &lt; .001***\nunemployment      |          above_65 |  1.51e-03 | [-0.05,  0.05] | 6.25e+08 | &gt; .999   \nunemployment      |             black |      0.23 | [ 0.18,  0.28] | 4.82e+08 | &lt; .001***\nunemployment      |            native |     -0.04 | [-0.09,  0.01] | 6.49e+08 | &gt; .999   \nunemployment      |             asian |     -0.02 | [-0.07,  0.03] | 6.37e+08 | &gt; .999   \nunemployment      |          hispanic |     -0.01 | [-0.06,  0.04] | 6.32e+08 | &gt; .999   \nunemployment      |             white |     -0.24 | [-0.29, -0.19] | 7.76e+08 | &lt; .001***\nunemployment      |            female |      0.12 | [ 0.07,  0.17] | 5.49e+08 | &lt; .001***\nunemployment      |             rural | -9.86e-03 | [-0.06,  0.04] | 6.32e+08 | &gt; .999   \nunemployment      |        inactivity |      0.29 | [ 0.24,  0.34] | 4.44e+08 | &lt; .001***\nunemployment      |           obesity |      0.18 | [ 0.13,  0.23] | 5.14e+08 | &lt; .001***\nunemployment      |  household_income |     -0.34 | [-0.39, -0.30] | 8.40e+08 | &lt; .001***\nunemployment      |      smoking_prop |      0.34 | [ 0.29,  0.38] | 4.14e+08 | &lt; .001***\nunemployment      |     drinking_prop |     -0.24 | [-0.29, -0.19] | 7.78e+08 | &lt; .001***\nunemployment      |         dentist_n |      0.04 | [-0.01,  0.09] | 6.00e+08 | &gt; .999   \nincome_inequality |      social_score |     -0.06 | [-0.11, -0.01] | 6.63e+08 | &gt; .999   \nincome_inequality |   life_expectancy |     -0.36 | [-0.40, -0.31] | 8.50e+08 | &lt; .001***\nincome_inequality |          diabetes |      0.47 | [ 0.43,  0.51] | 3.31e+08 | &lt; .001***\nincome_inequality |      insuff_sleep |      0.40 | [ 0.35,  0.44] | 3.76e+08 | &lt; .001***\nincome_inequality |   highschool_grad |     -0.13 | [-0.18, -0.08] | 7.04e+08 | &lt; .001***\nincome_inequality |       segregation |     -0.04 | [-0.09,  0.01] | 6.50e+08 | &gt; .999   \nincome_inequality |    home_ownership |     -0.27 | [-0.31, -0.22] | 7.93e+08 | &lt; .001***\nincome_inequality |    housing_burden |      0.42 | [ 0.37,  0.46] | 3.66e+08 | &lt; .001***\nincome_inequality |          below_18 |     -0.15 | [-0.20, -0.10] | 7.18e+08 | &lt; .001***\nincome_inequality |          above_65 |     -0.03 | [-0.08,  0.03] | 6.42e+08 | &gt; .999   \nincome_inequality |             black |      0.31 | [ 0.27,  0.36] | 4.29e+08 | &lt; .001***\nincome_inequality |            native |     -0.08 | [-0.13, -0.03] | 6.78e+08 | 0.113    \nincome_inequality |             asian |     -0.03 | [-0.09,  0.02] | 6.47e+08 | &gt; .999   \nincome_inequality |          hispanic |     -0.05 | [-0.10,  0.00] | 6.57e+08 | &gt; .999   \nincome_inequality |             white |     -0.26 | [-0.31, -0.22] | 7.90e+08 | &lt; .001***\nincome_inequality |            female |      0.26 | [ 0.21,  0.30] | 4.64e+08 | &lt; .001***\nincome_inequality |             rural |     -0.03 | [-0.08,  0.03] | 6.41e+08 | &gt; .999   \nincome_inequality |        inactivity |      0.38 | [ 0.34,  0.42] | 3.87e+08 | &lt; .001***\nincome_inequality |           obesity |      0.23 | [ 0.18,  0.28] | 4.81e+08 | &lt; .001***\nincome_inequality |  household_income |     -0.41 | [-0.45, -0.37] | 8.83e+08 | &lt; .001***\nincome_inequality |      smoking_prop |      0.34 | [ 0.29,  0.38] | 4.15e+08 | &lt; .001***\nincome_inequality |     drinking_prop |     -0.26 | [-0.31, -0.21] | 7.88e+08 | &lt; .001***\nincome_inequality |         dentist_n |      0.02 | [-0.03,  0.07] | 6.11e+08 | &gt; .999   \nsocial_score      |   life_expectancy |      0.02 | [-0.03,  0.07] | 6.11e+08 | &gt; .999   \nsocial_score      |          diabetes |     -0.11 | [-0.16, -0.06] | 6.94e+08 | 0.002**  \nsocial_score      |      insuff_sleep |     -0.12 | [-0.17, -0.07] | 7.00e+08 | &lt; .001***\nsocial_score      |   highschool_grad |      0.04 | [-0.01,  0.09] | 5.98e+08 | &gt; .999   \nsocial_score      |       segregation |     -0.02 | [-0.07,  0.04] | 6.35e+08 | &gt; .999   \nsocial_score      |    home_ownership |      0.08 | [ 0.03,  0.13] | 5.73e+08 | 0.121    \nsocial_score      |    housing_burden |     -0.19 | [-0.24, -0.14] | 7.43e+08 | &lt; .001***\nsocial_score      |          below_18 |     -0.01 | [-0.06,  0.04] | 6.32e+08 | &gt; .999   \nsocial_score      |          above_65 |      0.22 | [ 0.17,  0.27] | 4.88e+08 | &lt; .001***\nsocial_score      |             black |     -0.02 | [-0.07,  0.03] | 6.37e+08 | &gt; .999   \nsocial_score      |            native |     -0.08 | [-0.13, -0.03] | 6.74e+08 | 0.251    \nsocial_score      |             asian |     -0.11 | [-0.16, -0.06] | 6.92e+08 | 0.004**  \nsocial_score      |          hispanic |     -0.19 | [-0.24, -0.14] | 7.47e+08 | &lt; .001***\nsocial_score      |             white |      0.19 | [ 0.14,  0.24] | 5.05e+08 | &lt; .001***\nsocial_score      |            female |      0.09 | [ 0.04,  0.14] | 5.69e+08 | 0.046*   \nsocial_score      |             rural |      0.05 | [ 0.00,  0.10] | 5.93e+08 | &gt; .999   \nsocial_score      |        inactivity |      0.01 | [-0.04,  0.06] | 6.18e+08 | &gt; .999   \nsocial_score      |           obesity |      0.14 | [ 0.09,  0.19] | 5.40e+08 | &lt; .001***\nsocial_score      |  household_income |     -0.03 | [-0.08,  0.02] | 6.44e+08 | &gt; .999   \nsocial_score      |      smoking_prop |     -0.04 | [-0.09,  0.01] | 6.51e+08 | &gt; .999   \nsocial_score      |     drinking_prop |      0.11 | [ 0.06,  0.16] | 5.54e+08 | &lt; .001***\nsocial_score      |         dentist_n |     -0.03 | [-0.09,  0.02] | 6.47e+08 | &gt; .999   \nlife_expectancy   |          diabetes |     -0.78 | [-0.79, -0.75] | 1.11e+09 | &lt; .001***\nlife_expectancy   |      insuff_sleep |     -0.70 | [-0.73, -0.68] | 1.06e+09 | &lt; .001***\nlife_expectancy   |   highschool_grad |      0.03 | [-0.02,  0.08] | 6.08e+08 | &gt; .999   \nlife_expectancy   |       segregation |      0.28 | [ 0.23,  0.33] | 4.51e+08 | &lt; .001***\nlife_expectancy   |    home_ownership |      0.03 | [-0.02,  0.08] | 6.09e+08 | &gt; .999   \nlife_expectancy   |    housing_burden |      0.07 | [ 0.02,  0.12] | 5.84e+08 | 0.834    \nlife_expectancy   |          below_18 |     -0.20 | [-0.24, -0.15] | 7.48e+08 | &lt; .001***\nlife_expectancy   |          above_65 |      0.08 | [ 0.03,  0.13] | 5.77e+08 | 0.229    \nlife_expectancy   |             black |     -0.27 | [-0.31, -0.22] | 7.93e+08 | &lt; .001***\nlife_expectancy   |            native |      0.08 | [ 0.03,  0.13] | 5.76e+08 | 0.205    \nlife_expectancy   |             asian |      0.38 | [ 0.34,  0.43] | 3.86e+08 | &lt; .001***\nlife_expectancy   |          hispanic |      0.21 | [ 0.16,  0.26] | 4.95e+08 | &lt; .001***\nlife_expectancy   |             white |      0.14 | [ 0.09,  0.19] | 5.39e+08 | &lt; .001***\nlife_expectancy   |            female |     -0.14 | [-0.19, -0.09] | 7.14e+08 | &lt; .001***\nlife_expectancy   |             rural |     -0.27 | [-0.32, -0.22] | 7.96e+08 | &lt; .001***\nlife_expectancy   |        inactivity |     -0.75 | [-0.78, -0.73] | 1.10e+09 | &lt; .001***\nlife_expectancy   |           obesity |     -0.65 | [-0.68, -0.62] | 1.03e+09 | &lt; .001***\nlife_expectancy   |  household_income |      0.74 | [ 0.72,  0.76] | 1.62e+08 | &lt; .001***\nlife_expectancy   |      smoking_prop |     -0.74 | [-0.76, -0.72] | 1.09e+09 | &lt; .001***\nlife_expectancy   |     drinking_prop |      0.62 | [ 0.59,  0.65] | 2.37e+08 | &lt; .001***\nlife_expectancy   |         dentist_n |     -0.36 | [-0.40, -0.31] | 8.50e+08 | &lt; .001***\ndiabetes          |      insuff_sleep |      0.79 | [ 0.77,  0.81] | 1.30e+08 | &lt; .001***\ndiabetes          |   highschool_grad |     -0.03 | [-0.08,  0.03] | 6.41e+08 | &gt; .999   \ndiabetes          |       segregation |     -0.36 | [-0.40, -0.31] | 8.50e+08 | &lt; .001***\ndiabetes          |    home_ownership |     -0.15 | [-0.20, -0.09] | 7.16e+08 | &lt; .001***\ndiabetes          |    housing_burden |      0.07 | [ 0.02,  0.12] | 5.83e+08 | 0.678    \ndiabetes          |          below_18 |      0.19 | [ 0.14,  0.24] | 5.07e+08 | &lt; .001***\ndiabetes          |          above_65 |     -0.19 | [-0.24, -0.14] | 7.43e+08 | &lt; .001***\ndiabetes          |             black |      0.44 | [ 0.40,  0.48] | 3.51e+08 | &lt; .001***\ndiabetes          |            native |     -0.04 | [-0.09,  0.01] | 6.50e+08 | &gt; .999   \ndiabetes          |             asian |     -0.26 | [-0.31, -0.21] | 7.87e+08 | &lt; .001***\ndiabetes          |          hispanic |      0.01 | [-0.04,  0.06] | 6.17e+08 | &gt; .999   \ndiabetes          |             white |     -0.43 | [-0.47, -0.39] | 8.95e+08 | &lt; .001***\ndiabetes          |            female |      0.14 | [ 0.09,  0.19] | 5.39e+08 | &lt; .001***\ndiabetes          |             rural |      0.22 | [ 0.17,  0.27] | 4.86e+08 | &lt; .001***\ndiabetes          |        inactivity |      0.86 | [ 0.84,  0.87] | 8.88e+07 | &lt; .001***\ndiabetes          |           obesity |      0.70 | [ 0.67,  0.73] | 1.87e+08 | &lt; .001***\ndiabetes          |  household_income |     -0.72 | [-0.74, -0.69] | 1.07e+09 | &lt; .001***\ndiabetes          |      smoking_prop |      0.66 | [ 0.63,  0.69] | 2.14e+08 | &lt; .001***\ndiabetes          |     drinking_prop |     -0.67 | [-0.70, -0.64] | 1.05e+09 | &lt; .001***\ndiabetes          |         dentist_n |      0.38 | [ 0.34,  0.42] | 3.86e+08 | &lt; .001***\ninsuff_sleep      |   highschool_grad |      0.08 | [ 0.03,  0.13] | 5.78e+08 | 0.267    \ninsuff_sleep      |       segregation |     -0.34 | [-0.39, -0.30] | 8.39e+08 | &lt; .001***\ninsuff_sleep      |    home_ownership |     -0.04 | [-0.09,  0.01] | 6.52e+08 | &gt; .999   \ninsuff_sleep      |    housing_burden |      0.07 | [ 0.02,  0.12] | 5.83e+08 | 0.678    \ninsuff_sleep      |          below_18 |      0.03 | [-0.02,  0.08] | 6.05e+08 | &gt; .999   \ninsuff_sleep      |          above_65 |     -0.13 | [-0.18, -0.08] | 7.08e+08 | &lt; .001***\ninsuff_sleep      |             black |      0.50 | [ 0.46,  0.54] | 3.13e+08 | &lt; .001***\ninsuff_sleep      |            native |     -0.30 | [-0.34, -0.25] | 8.10e+08 | &lt; .001***\ninsuff_sleep      |             asian |     -0.22 | [-0.27, -0.17] | 7.62e+08 | &lt; .001***\ninsuff_sleep      |          hispanic |     -0.16 | [-0.21, -0.11] | 7.25e+08 | &lt; .001***\ninsuff_sleep      |             white |     -0.24 | [-0.29, -0.20] | 7.79e+08 | &lt; .001***\ninsuff_sleep      |            female |      0.19 | [ 0.14,  0.24] | 5.06e+08 | &lt; .001***\ninsuff_sleep      |             rural |      0.13 | [ 0.08,  0.18] | 5.44e+08 | &lt; .001***\ninsuff_sleep      |        inactivity |      0.71 | [ 0.68,  0.73] | 1.82e+08 | &lt; .001***\ninsuff_sleep      |           obesity |      0.57 | [ 0.54,  0.61] | 2.67e+08 | &lt; .001***\ninsuff_sleep      |  household_income |     -0.56 | [-0.60, -0.53] | 9.77e+08 | &lt; .001***\ninsuff_sleep      |      smoking_prop |      0.66 | [ 0.63,  0.68] | 2.15e+08 | &lt; .001***\ninsuff_sleep      |     drinking_prop |     -0.58 | [-0.61, -0.54] | 9.86e+08 | &lt; .001***\ninsuff_sleep      |         dentist_n |      0.34 | [ 0.29,  0.39] | 4.12e+08 | &lt; .001***\nhighschool_grad   |       segregation |     -0.18 | [-0.23, -0.13] | 7.38e+08 | &lt; .001***\nhighschool_grad   |    home_ownership |      0.31 | [ 0.26,  0.35] | 4.33e+08 | &lt; .001***\nhighschool_grad   |    housing_burden |     -0.28 | [-0.33, -0.24] | 8.03e+08 | &lt; .001***\nhighschool_grad   |          below_18 |      0.06 | [ 0.01,  0.11] | 5.87e+08 | &gt; .999   \nhighschool_grad   |          above_65 |      0.07 | [ 0.02,  0.12] | 5.81e+08 | 0.484    \nhighschool_grad   |             black |     -0.08 | [-0.13, -0.03] | 6.75e+08 | 0.184    \nhighschool_grad   |            native |     -0.21 | [-0.26, -0.16] | 7.59e+08 | &lt; .001***\nhighschool_grad   |             asian |     -0.20 | [-0.25, -0.15] | 7.48e+08 | &lt; .001***\nhighschool_grad   |          hispanic |     -0.12 | [-0.17, -0.07] | 6.99e+08 | &lt; .001***\nhighschool_grad   |             white |      0.27 | [ 0.22,  0.32] | 4.57e+08 | &lt; .001***\nhighschool_grad   |            female |     -0.08 | [-0.13, -0.03] | 6.74e+08 | 0.259    \nhighschool_grad   |             rural |      0.21 | [ 0.16,  0.26] | 4.92e+08 | &lt; .001***\nhighschool_grad   |        inactivity |      0.11 | [ 0.06,  0.16] | 5.59e+08 | 0.004**  \nhighschool_grad   |           obesity |      0.09 | [ 0.04,  0.14] | 5.67e+08 | 0.032*   \nhighschool_grad   |  household_income |      0.02 | [-0.03,  0.07] | 6.11e+08 | &gt; .999   \nhighschool_grad   |      smoking_prop |     -0.05 | [-0.10,  0.01] | 6.54e+08 | &gt; .999   \nhighschool_grad   |     drinking_prop |     -0.07 | [-0.13, -0.02] | 6.72e+08 | 0.342    \nhighschool_grad   |         dentist_n |      0.26 | [ 0.21,  0.31] | 4.61e+08 | &lt; .001***\nsegregation       |    home_ownership |     -0.01 | [-0.06,  0.04] | 6.34e+08 | &gt; .999   \nsegregation       |    housing_burden |      0.12 | [ 0.07,  0.17] | 5.50e+08 | &lt; .001***\nsegregation       |          below_18 |     -0.10 | [-0.15, -0.05] | 6.89e+08 | 0.008**  \nsegregation       |          above_65 |      0.12 | [ 0.07,  0.17] | 5.52e+08 | &lt; .001***\nsegregation       |             black |     -0.37 | [-0.42, -0.33] | 8.60e+08 | &lt; .001***\nsegregation       |            native |      0.12 | [ 0.06,  0.17] | 5.53e+08 | &lt; .001***\nsegregation       |             asian |      0.09 | [ 0.04,  0.14] | 5.67e+08 | 0.029*   \nsegregation       |          hispanic |  2.81e-03 | [-0.05,  0.05] | 6.24e+08 | &gt; .999   \nsegregation       |             white |      0.24 | [ 0.19,  0.28] | 4.77e+08 | &lt; .001***\nsegregation       |            female |     -0.07 | [-0.12, -0.02] | 6.70e+08 | 0.510    \nsegregation       |             rural |     -0.18 | [-0.23, -0.13] | 7.36e+08 | &lt; .001***\nsegregation       |        inactivity |     -0.30 | [-0.34, -0.25] | 8.12e+08 | &lt; .001***\nsegregation       |           obesity |     -0.29 | [-0.34, -0.25] | 8.09e+08 | &lt; .001***\nsegregation       |  household_income |      0.19 | [ 0.14,  0.24] | 5.07e+08 | &lt; .001***\nsegregation       |      smoking_prop |     -0.18 | [-0.23, -0.13] | 7.38e+08 | &lt; .001***\nsegregation       |     drinking_prop |      0.29 | [ 0.24,  0.34] | 4.44e+08 | &lt; .001***\nsegregation       |         dentist_n |     -0.32 | [-0.37, -0.28] | 8.27e+08 | &lt; .001***\nhome_ownership    |    housing_burden |     -0.55 | [-0.58, -0.51] | 9.68e+08 | &lt; .001***\nhome_ownership    |          below_18 |     -0.10 | [-0.15, -0.05] | 6.88e+08 | 0.011*   \nhome_ownership    |          above_65 |      0.48 | [ 0.44,  0.52] | 3.22e+08 | &lt; .001***\nhome_ownership    |             black |     -0.33 | [-0.38, -0.29] | 8.34e+08 | &lt; .001***\nhome_ownership    |            native |     -0.10 | [-0.15, -0.05] | 6.87e+08 | 0.013*   \nhome_ownership    |             asian |     -0.53 | [-0.56, -0.49] | 9.55e+08 | &lt; .001***\nhome_ownership    |          hispanic |     -0.37 | [-0.41, -0.32] | 8.55e+08 | &lt; .001***\nhome_ownership    |             white |      0.50 | [ 0.47,  0.54] | 3.10e+08 | &lt; .001***\nhome_ownership    |            female |     -0.24 | [-0.28, -0.19] | 7.73e+08 | &lt; .001***\nhome_ownership    |             rural |      0.56 | [ 0.52,  0.59] | 2.78e+08 | &lt; .001***\nhome_ownership    |        inactivity |      0.03 | [-0.03,  0.08] | 6.10e+08 | &gt; .999   \nhome_ownership    |           obesity |      0.10 | [ 0.05,  0.15] | 5.64e+08 | 0.015*   \nhome_ownership    |  household_income |     -0.03 | [-0.08,  0.02] | 6.46e+08 | &gt; .999   \nhome_ownership    |      smoking_prop |     -0.05 | [-0.10,  0.00] | 6.56e+08 | &gt; .999   \nhome_ownership    |     drinking_prop |     -0.09 | [-0.14, -0.04] | 6.83e+08 | 0.033*   \nhome_ownership    |         dentist_n |      0.46 | [ 0.42,  0.50] | 3.37e+08 | &lt; .001***\nhousing_burden    |          below_18 |     -0.20 | [-0.25, -0.15] | 7.53e+08 | &lt; .001***\nhousing_burden    |          above_65 |     -0.21 | [-0.26, -0.17] | 7.60e+08 | &lt; .001***\nhousing_burden    |             black |      0.35 | [ 0.30,  0.39] | 4.08e+08 | &lt; .001***\nhousing_burden    |            native |     -0.03 | [-0.08,  0.02] | 6.46e+08 | &gt; .999   \nhousing_burden    |             asian |      0.46 | [ 0.42,  0.50] | 3.36e+08 | &lt; .001***\nhousing_burden    |          hispanic |      0.25 | [ 0.20,  0.30] | 4.67e+08 | &lt; .001***\nhousing_burden    |             white |     -0.40 | [-0.44, -0.36] | 8.77e+08 | &lt; .001***\nhousing_burden    |            female |      0.30 | [ 0.26,  0.35] | 4.35e+08 | &lt; .001***\nhousing_burden    |             rural |     -0.52 | [-0.56, -0.48] | 9.52e+08 | &lt; .001***\nhousing_burden    |        inactivity |     -0.14 | [-0.19, -0.09] | 7.11e+08 | &lt; .001***\nhousing_burden    |           obesity |     -0.22 | [-0.27, -0.17] | 7.63e+08 | &lt; .001***\nhousing_burden    |  household_income |      0.09 | [ 0.04,  0.14] | 5.70e+08 | 0.059    \nhousing_burden    |      smoking_prop |     -0.05 | [-0.10,  0.00] | 6.56e+08 | &gt; .999   \nhousing_burden    |     drinking_prop |      0.07 | [ 0.01,  0.12] | 5.84e+08 | 0.874    \nhousing_burden    |         dentist_n |     -0.40 | [-0.44, -0.35] | 8.73e+08 | &lt; .001***\nbelow_18          |          above_65 |     -0.50 | [-0.54, -0.46] | 9.40e+08 | &lt; .001***\nbelow_18          |             black |     -0.06 | [-0.11, -0.01] | 6.65e+08 | &gt; .999   \nbelow_18          |            native |      0.18 | [ 0.13,  0.23] | 5.15e+08 | &lt; .001***\nbelow_18          |             asian |     -0.05 | [-0.10,  0.00] | 6.56e+08 | &gt; .999   \nbelow_18          |          hispanic |      0.21 | [ 0.16,  0.26] | 4.93e+08 | &lt; .001***\nbelow_18          |             white |     -0.17 | [-0.22, -0.12] | 7.30e+08 | &lt; .001***\nbelow_18          |            female |      0.01 | [-0.04,  0.06] | 6.18e+08 | &gt; .999   \nbelow_18          |             rural |     -0.02 | [-0.07,  0.03] | 6.38e+08 | &gt; .999   \nbelow_18          |        inactivity |      0.23 | [ 0.18,  0.27] | 4.85e+08 | &lt; .001***\nbelow_18          |           obesity |      0.27 | [ 0.22,  0.31] | 4.59e+08 | &lt; .001***\nbelow_18          |  household_income |      0.02 | [-0.03,  0.07] | 6.13e+08 | &gt; .999   \nbelow_18          |      smoking_prop |      0.06 | [ 0.01,  0.11] | 5.88e+08 | &gt; .999   \nbelow_18          |     drinking_prop |     -0.10 | [-0.15, -0.05] | 6.86e+08 | 0.016*   \nbelow_18          |         dentist_n |      0.04 | [-0.02,  0.09] | 6.03e+08 | &gt; .999   \nabove_65          |             black |     -0.39 | [-0.43, -0.34] | 8.66e+08 | &lt; .001***\nabove_65          |            native |     -0.01 | [-0.06,  0.04] | 6.33e+08 | &gt; .999   \nabove_65          |             asian |     -0.43 | [-0.47, -0.38] | 8.93e+08 | &lt; .001***\nabove_65          |          hispanic |     -0.35 | [-0.39, -0.30] | 8.44e+08 | &lt; .001***\nabove_65          |             white |      0.47 | [ 0.42,  0.50] | 3.34e+08 | &lt; .001***\nabove_65          |            female |     -0.08 | [-0.13, -0.03] | 6.78e+08 | 0.113    \nabove_65          |             rural |      0.50 | [ 0.46,  0.53] | 3.16e+08 | &lt; .001***\nabove_65          |        inactivity |     -0.04 | [-0.09,  0.01] | 6.50e+08 | &gt; .999   \nabove_65          |           obesity |      0.02 | [-0.03,  0.07] | 6.12e+08 | &gt; .999   \nabove_65          |  household_income |     -0.24 | [-0.29, -0.19] | 7.76e+08 | &lt; .001***\nabove_65          |      smoking_prop |     -0.10 | [-0.15, -0.05] | 6.90e+08 | 0.007**  \nabove_65          |     drinking_prop |     -0.11 | [-0.16, -0.06] | 6.94e+08 | 0.002**  \nabove_65          |         dentist_n |      0.23 | [ 0.18,  0.28] | 4.83e+08 | &lt; .001***\nblack             |            native |     -0.29 | [-0.34, -0.24] | 8.08e+08 | &lt; .001***\nblack             |             asian |      0.33 | [ 0.28,  0.37] | 4.22e+08 | &lt; .001***\nblack             |          hispanic |      0.15 | [ 0.10,  0.20] | 5.30e+08 | &lt; .001***\nblack             |             white |     -0.60 | [-0.64, -0.57] | 1.00e+09 | &lt; .001***\nblack             |            female |      0.38 | [ 0.34,  0.43] | 3.85e+08 | &lt; .001***\nblack             |             rural |     -0.35 | [-0.39, -0.30] | 8.42e+08 | &lt; .001***\nblack             |        inactivity |      0.25 | [ 0.20,  0.29] | 4.71e+08 | &lt; .001***\nblack             |           obesity |      0.17 | [ 0.12,  0.22] | 5.21e+08 | &lt; .001***\nblack             |  household_income |     -0.08 | [-0.13, -0.03] | 6.74e+08 | 0.251    \nblack             |      smoking_prop |      0.24 | [ 0.19,  0.29] | 4.74e+08 | &lt; .001***\nblack             |     drinking_prop |     -0.18 | [-0.23, -0.13] | 7.37e+08 | &lt; .001***\nblack             |         dentist_n |     -0.03 | [-0.08,  0.02] | 6.45e+08 | &gt; .999   \nnative            |             asian |      0.08 | [ 0.02,  0.13] | 5.78e+08 | 0.296    \nnative            |          hispanic |      0.49 | [ 0.45,  0.53] | 3.18e+08 | &lt; .001***\nnative            |             white |     -0.29 | [-0.34, -0.24] | 8.08e+08 | &lt; .001***\nnative            |            female |     -0.32 | [-0.37, -0.28] | 8.29e+08 | &lt; .001***\nnative            |             rural |      0.10 | [ 0.05,  0.15] | 5.64e+08 | 0.014*   \nnative            |        inactivity |     -0.12 | [-0.17, -0.07] | 7.04e+08 | &lt; .001***\nnative            |           obesity |     -0.11 | [-0.16, -0.06] | 6.94e+08 | 0.002**  \nnative            |  household_income |      0.03 | [-0.02,  0.08] | 6.07e+08 | &gt; .999   \nnative            |      smoking_prop |     -0.18 | [-0.23, -0.14] | 7.41e+08 | &lt; .001***\nnative            |     drinking_prop |      0.10 | [ 0.05,  0.15] | 5.63e+08 | 0.010*   \nnative            |         dentist_n |     -0.08 | [-0.13, -0.03] | 6.78e+08 | 0.110    \nasian             |          hispanic |      0.51 | [ 0.48,  0.55] | 3.04e+08 | &lt; .001***\nasian             |             white |     -0.46 | [-0.50, -0.42] | 9.14e+08 | &lt; .001***\nasian             |            female |      0.24 | [ 0.19,  0.28] | 4.78e+08 | &lt; .001***\nasian             |             rural |     -0.71 | [-0.73, -0.68] | 1.07e+09 | &lt; .001***\nasian             |        inactivity |     -0.47 | [-0.51, -0.43] | 9.19e+08 | &lt; .001***\nasian             |           obesity |     -0.50 | [-0.54, -0.46] | 9.41e+08 | &lt; .001***\nasian             |  household_income |      0.53 | [ 0.49,  0.57] | 2.92e+08 | &lt; .001***\nasian             |      smoking_prop |     -0.36 | [-0.40, -0.32] | 8.51e+08 | &lt; .001***\nasian             |     drinking_prop |      0.36 | [ 0.31,  0.40] | 4.00e+08 | &lt; .001***\nasian             |         dentist_n |     -0.59 | [-0.62, -0.55] | 9.92e+08 | &lt; .001***\nhispanic          |             white |     -0.65 | [-0.68, -0.62] | 1.03e+09 | &lt; .001***\nhispanic          |            female |     -0.03 | [-0.08,  0.02] | 6.44e+08 | &gt; .999   \nhispanic          |             rural |     -0.34 | [-0.39, -0.30] | 8.40e+08 | &lt; .001***\nhispanic          |        inactivity |     -0.20 | [-0.25, -0.15] | 7.51e+08 | &lt; .001***\nhispanic          |           obesity |     -0.30 | [-0.34, -0.25] | 8.10e+08 | &lt; .001***\nhispanic          |  household_income |      0.29 | [ 0.24,  0.34] | 4.44e+08 | &lt; .001***\nhispanic          |      smoking_prop |     -0.40 | [-0.45, -0.36] | 8.78e+08 | &lt; .001***\nhispanic          |     drinking_prop |      0.11 | [ 0.06,  0.16] | 5.59e+08 | 0.004**  \nhispanic          |         dentist_n |     -0.25 | [-0.30, -0.20] | 7.82e+08 | &lt; .001***\nwhite             |            female |     -0.19 | [-0.24, -0.14] | 7.44e+08 | &lt; .001***\nwhite             |             rural |      0.32 | [ 0.27,  0.37] | 4.24e+08 | &lt; .001***\nwhite             |        inactivity |     -0.11 | [-0.16, -0.06] | 6.95e+08 | 0.002**  \nwhite             |           obesity |     -0.02 | [-0.07,  0.03] | 6.40e+08 | &gt; .999   \nwhite             |  household_income | -5.93e-04 | [-0.05,  0.05] | 6.26e+08 | &gt; .999   \nwhite             |      smoking_prop |      0.03 | [-0.02,  0.08] | 6.08e+08 | &gt; .999   \nwhite             |     drinking_prop |      0.13 | [ 0.08,  0.18] | 5.42e+08 | &lt; .001***\nwhite             |         dentist_n |      0.17 | [ 0.12,  0.22] | 5.22e+08 | &lt; .001***\nfemale            |             rural |     -0.38 | [-0.43, -0.34] | 8.66e+08 | &lt; .001***\nfemale            |        inactivity |      0.03 | [-0.02,  0.08] | 6.09e+08 | &gt; .999   \nfemale            |           obesity | -9.56e-03 | [-0.06,  0.04] | 6.31e+08 | &gt; .999   \nfemale            |  household_income | -1.80e-03 | [-0.05,  0.05] | 6.27e+08 | &gt; .999   \nfemale            |      smoking_prop |      0.08 | [ 0.03,  0.13] | 5.75e+08 | 0.181    \nfemale            |     drinking_prop |     -0.17 | [-0.21, -0.12] | 7.29e+08 | &lt; .001***\nfemale            |         dentist_n |     -0.23 | [-0.28, -0.18] | 7.69e+08 | &lt; .001***\nrural             |        inactivity |      0.38 | [ 0.34,  0.43] | 3.85e+08 | &lt; .001***\nrural             |           obesity |      0.39 | [ 0.35,  0.43] | 3.81e+08 | &lt; .001***\nrural             |  household_income |     -0.47 | [-0.51, -0.43] | 9.22e+08 | &lt; .001***\nrural             |      smoking_prop |      0.24 | [ 0.19,  0.28] | 4.78e+08 | &lt; .001***\nrural             |     drinking_prop |     -0.33 | [-0.38, -0.29] | 8.33e+08 | &lt; .001***\nrural             |         dentist_n |      0.66 | [ 0.63,  0.69] | 2.12e+08 | &lt; .001***\ninactivity        |           obesity |      0.79 | [ 0.77,  0.81] | 1.29e+08 | &lt; .001***\ninactivity        |  household_income |     -0.76 | [-0.78, -0.74] | 1.10e+09 | &lt; .001***\ninactivity        |      smoking_prop |      0.71 | [ 0.68,  0.73] | 1.83e+08 | &lt; .001***\ninactivity        |     drinking_prop |     -0.62 | [-0.65, -0.58] | 1.01e+09 | &lt; .001***\ninactivity        |         dentist_n |      0.50 | [ 0.46,  0.53] | 3.14e+08 | &lt; .001***\nobesity           |  household_income |     -0.66 | [-0.69, -0.63] | 1.04e+09 | &lt; .001***\nobesity           |      smoking_prop |      0.62 | [ 0.58,  0.65] | 2.40e+08 | &lt; .001***\nobesity           |     drinking_prop |     -0.49 | [-0.53, -0.45] | 9.35e+08 | &lt; .001***\nobesity           |         dentist_n |      0.45 | [ 0.40,  0.49] | 3.47e+08 | &lt; .001***\nhousehold_income  |      smoking_prop |     -0.66 | [-0.69, -0.63] | 1.04e+09 | &lt; .001***\nhousehold_income  |     drinking_prop |      0.61 | [ 0.58,  0.64] | 2.45e+08 | &lt; .001***\nhousehold_income  |         dentist_n |     -0.42 | [-0.47, -0.38] | 8.91e+08 | &lt; .001***\nsmoking_prop      |     drinking_prop |     -0.47 | [-0.51, -0.43] | 9.18e+08 | &lt; .001***\nsmoking_prop      |         dentist_n |      0.32 | [ 0.27,  0.37] | 4.25e+08 | &lt; .001***\ndrinking_prop     |         dentist_n |     -0.39 | [-0.43, -0.35] | 8.69e+08 | &lt; .001***\n\np-value adjustment method: Holm (1979)\nObservations: 1554\n\n\nThe variables with a correlation of 0.8 or more (or -0.8 or less) are:\n\npoor_health with poor_physical, life_expectancy, diabetes, inactivity, and obesity\npoor_physical with poor_mental, life_expectancy, diabetes, and inactivity\ndiabetes with inactivity\n\n\nThe variables that exhibited high correlation with the outcome smoking_prop will be removed from the analysis (poor_health, poor_physical, and diabetes).\n\n\n\nCode\nchr_fin &lt;- chr_simp |&gt;\n  dplyr::select(-fipscode, -poor_health, -poor_physical, -inactivity)\n\ndim(chr_fin)\n\n\n[1] 1554   31",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#calculating-and-evaluating-ps-balance",
    "href": "project_06.html#calculating-and-evaluating-ps-balance",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "10.1 Calculating and Evaluating PS Balance",
    "text": "10.1 Calculating and Evaluating PS Balance\nTo calculate the PS, we will build a logistic model with the binary exposure as the outcome and the covariates as the predictors.\n\n\nCode\npsmodel0 &lt;- glm(dentist_grp ~  poor_mental + food_index + uninsured + income_inequality +\n                  primary_care + mental_care + highschool_grad + some_college + unemployment + \n                  social_score + life_expectancy + insuff_sleep + segregation + home_ownership +\n                  housing_burden + below_18 + above_65 + black + native + asian + hispanic +\n                  white + female + rural + obesity + household_income, \n                family = binomial(), data= chr_fin)\n\nmodel_parameters(psmodel0) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−0.289\n7.033\n0.950\n−14.370\n13.621\n−0.041\nInf\n0.967\n\n\npoor_mental\n0.229\n0.283\n0.950\n−0.325\n0.785\n0.811\nInf\n0.417\n\n\nfood_index\n−0.196\n0.107\n0.950\n−0.409\n0.012\n−1.826\nInf\n0.068\n\n\nuninsured\n12.491\n3.018\n0.950\n6.653\n18.494\n4.139\nInf\n0.000\n\n\nincome_inequality\n0.143\n0.161\n0.950\n−0.167\n0.464\n0.890\nInf\n0.373\n\n\nprimary_care\n−3,235.569\n350.427\n0.950\n−3,940.793\n−2,564.907\n−9.233\nInf\n0.000\n\n\nmental_care\n0.000\n0.000\n0.950\n0.000\n0.000\n2.513\nInf\n0.012\n\n\nhighschool_grad\n−0.445\n1.344\n0.950\n−3.212\n2.094\n−0.331\nInf\n0.741\n\n\nsome_college\n−0.572\n1.270\n0.950\n−3.064\n1.920\n−0.451\nInf\n0.652\n\n\nunemployment\n−18.456\n10.540\n0.950\n−39.187\n2.206\n−1.751\nInf\n0.080\n\n\nsocial_score\n−0.018\n0.015\n0.950\n−0.048\n0.011\n−1.215\nInf\n0.224\n\n\nlife_expectancy\n−0.011\n0.048\n0.950\n−0.104\n0.085\n−0.225\nInf\n0.822\n\n\ninsuff_sleep\n3.596\n5.940\n0.950\n−8.048\n15.264\n0.605\nInf\n0.545\n\n\nsegregation\n−0.022\n0.007\n0.950\n−0.035\n−0.009\n−3.336\nInf\n0.001\n\n\nhome_ownership\n6.351\n2.013\n0.950\n2.421\n10.306\n3.155\nInf\n0.002\n\n\nhousing_burden\n−6.008\n4.090\n0.950\n−14.047\n2.009\n−1.469\nInf\n0.142\n\n\nbelow_18\n−14.298\n4.826\n0.950\n−23.729\n−4.787\n−2.963\nInf\n0.003\n\n\nabove_65\n−14.052\n3.834\n0.950\n−21.546\n−6.495\n−3.665\nInf\n0.000\n\n\nblack\n−1.113\n4.465\n0.950\n−10.265\n8.398\n−0.249\nInf\n0.803\n\n\nnative\n−8.765\n4.815\n0.950\n−18.599\n1.319\n−1.820\nInf\n0.069\n\n\nasian\n−26.237\n15.047\n0.950\n−57.152\n−2.854\n−1.744\nInf\n0.081\n\n\nhispanic\n−2.042\n4.303\n0.950\n−10.832\n7.051\n−0.474\nInf\n0.635\n\n\nwhite\n−1.641\n4.644\n0.950\n−11.106\n8.138\n−0.353\nInf\n0.724\n\n\nfemale\n−1.140\n5.360\n0.950\n−12.093\n9.212\n−0.213\nInf\n0.832\n\n\nrural\n4.280\n0.517\n0.950\n3.288\n5.316\n8.282\nInf\n0.000\n\n\nobesity\n9.328\n3.804\n0.950\n1.903\n16.834\n2.452\nInf\n0.014\n\n\nhousehold_income\n0.000\n0.000\n0.950\n0.000\n0.000\n0.812\nInf\n0.417\n\n\n\n\n\n\n\n\n10.1.1 Saving Propesnsity Score\n\n\nCode\nchr_fin$ps0 &lt;- psmodel0$fitted\n\nchr_fin$linps0 &lt;- psmodel0$linear.predictors\n\n\n\n\n10.1.2 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps0 + linps0 ~ dentist_grp, data = chr_fin) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps0\nHigh\n0.000\n0.004\n0.023\n0.124\n0.991\n0.139\n0.251\n777\n0\n\n\nps0\nLow\n0.014\n0.829\n0.943\n0.984\n1.000\n0.861\n0.193\n777\n0\n\n\nlinps0\nHigh\n−19.766\n−5.642\n−3.767\n−1.952\n4.666\n−3.895\n3.356\n777\n0\n\n\nlinps0\nLow\n−4.267\n1.579\n2.807\n4.149\n9.743\n2.815\n1.937\n777\n0\n\n\n\n\n\n\n\n\nThe propensity scores here are concerning. We will need to observe the value of inflation to observe potential collinearity between the covariates.\n\nThe VIF:\n\n\nCode\nvif_model &lt;- glm(dentist_grp ~  poor_mental + food_index + uninsured + income_inequality +\n                  primary_care + mental_care + highschool_grad + some_college + unemployment + \n                  social_score + life_expectancy + insuff_sleep + segregation + home_ownership +\n                  housing_burden + below_18 + above_65 + black + native + asian + hispanic +\n                  white + female + rural + obesity + household_income, \n                family = binomial(), data= chr_fin)\n\nvif(vif_model)\n\n\n      poor_mental        food_index         uninsured income_inequality \n         3.775083          2.288975          2.291229          2.039530 \n     primary_care       mental_care   highschool_grad      some_college \n         1.129137          1.219127          1.369741          2.204048 \n     unemployment      social_score   life_expectancy      insuff_sleep \n         1.920851          1.500884          3.128986          4.694362 \n      segregation    home_ownership    housing_burden          below_18 \n         1.337250          3.200085          2.076655          3.673811 \n         above_65             black            native             asian \n         4.596523         27.541605         21.671785          2.526745 \n         hispanic             white            female             rural \n        37.921934         87.584373          1.763807          2.417255 \n          obesity  household_income \n         2.243732          3.681487 \n\n\nWhile most of the variables have low variance inflation factors, there are a few with an extremely high values (&gt;10), which presents serious multi-collinearity. These variables are hispanic, white, black, and native. We will remove these variables from our analysis.\n\n\n10.1.3 Fixed Propensity Score\nWe will start by excluding the problematic variables from our final data set chr_fin to produce subset for outcome 1 analysis chr24_smoking.\n\n\nCode\nchr_fin1 &lt;- chr_fin|&gt;\n  dplyr::select(-hispanic, -white, -black, -native, -ps0, -linps0)\n\n\nNext, we will build the new model:\n\n\nCode\npsmodel00 &lt;- glm(dentist_grp ~  poor_mental + food_index + uninsured + income_inequality +\n                  primary_care + mental_care + highschool_grad + some_college + unemployment + \n                  social_score + life_expectancy + insuff_sleep + segregation + home_ownership +\n                  housing_burden + below_18 + above_65 + asian +\n                  female + rural + obesity + household_income,  \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel00) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−10.190\n5.276\n0.950\n−20.584\n0.116\n−1.931\nInf\n0.053\n\n\npoor_mental\n0.175\n0.256\n0.950\n−0.327\n0.679\n0.683\nInf\n0.495\n\n\nfood_index\n−0.128\n0.100\n0.950\n−0.325\n0.066\n−1.282\nInf\n0.200\n\n\nuninsured\n10.767\n2.457\n0.950\n6.056\n15.695\n4.382\nInf\n0.000\n\n\nincome_inequality\n−0.046\n0.144\n0.950\n−0.327\n0.240\n−0.322\nInf\n0.748\n\n\nprimary_care\n−3,322.832\n344.040\n0.950\n−4,015.515\n−2,664.968\n−9.658\nInf\n0.000\n\n\nmental_care\n0.000\n0.000\n0.950\n0.000\n0.000\n2.891\nInf\n0.004\n\n\nhighschool_grad\n1.728\n1.117\n0.950\n−0.492\n3.896\n1.547\nInf\n0.122\n\n\nsome_college\n−0.886\n1.213\n0.950\n−3.269\n1.492\n−0.730\nInf\n0.465\n\n\nunemployment\n−27.947\n9.386\n0.950\n−46.423\n−9.585\n−2.978\nInf\n0.003\n\n\nsocial_score\n−0.010\n0.015\n0.950\n−0.039\n0.019\n−0.700\nInf\n0.484\n\n\nlife_expectancy\n0.068\n0.045\n0.950\n−0.019\n0.158\n1.516\nInf\n0.129\n\n\ninsuff_sleep\n10.463\n5.100\n0.950\n0.488\n20.507\n2.052\nInf\n0.040\n\n\nsegregation\n−0.024\n0.006\n0.950\n−0.036\n−0.012\n−3.914\nInf\n0.000\n\n\nhome_ownership\n7.180\n1.794\n0.950\n3.689\n10.737\n4.002\nInf\n0.000\n\n\nhousing_burden\n−2.289\n3.806\n0.950\n−9.742\n5.197\n−0.602\nInf\n0.548\n\n\nbelow_18\n−17.897\n4.356\n0.950\n−26.485\n−9.390\n−4.109\nInf\n0.000\n\n\nabove_65\n−13.396\n3.645\n0.950\n−20.548\n−6.244\n−3.675\nInf\n0.000\n\n\nasian\n−26.238\n12.986\n0.950\n−52.511\n−5.981\n−2.020\nInf\n0.043\n\n\nfemale\n−0.123\n5.055\n0.950\n−10.218\n9.945\n−0.024\nInf\n0.981\n\n\nrural\n3.693\n0.456\n0.950\n2.814\n4.602\n8.104\nInf\n0.000\n\n\nobesity\n8.389\n3.681\n0.950\n1.204\n15.652\n2.279\nInf\n0.023\n\n\nhousehold_income\n0.000\n0.000\n0.950\n0.000\n0.000\n−0.281\nInf\n0.779\n\n\n\n\n\n\n\n\n\n10.1.4 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps00 &lt;- psmodel00$fitted\n\nchr_fin1$linps00 &lt;- psmodel00$linear.predictors\n\n\n\n\n10.1.5 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps00 + linps00 ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps00\nHigh\n0.000\n0.004\n0.026\n0.137\n0.992\n0.145\n0.254\n777\n0\n\n\nps00\nLow\n0.014\n0.828\n0.936\n0.982\n1.000\n0.855\n0.195\n777\n0\n\n\nlinps00\nHigh\n−20.056\n−5.575\n−3.626\n−1.842\n4.880\n−3.839\n3.430\n777\n0\n\n\nlinps00\nLow\n−4.238\n1.570\n2.689\n4.015\n10.800\n2.707\n1.906\n777\n0\n\n\n\n\n\n\n\n\nThe propensity scores slightly improved after removing the variables with high collinearity values. However, the problem with their values being too close to 0 or 1 is visibly persistent.\n\n\n10.1.5.1 Fixed Propensity Score - Part 2\nWe will attempt to observe the impact of each covariate on the outcome individually to rule out the variable(s) that impacted the PS values.\n\n10.1.5.1.1 poor_mental\n\n\nCode\npsmodel_pm &lt;- glm(dentist_grp ~  poor_mental, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_pm) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−4.579\n0.458\n0.950\n−5.487\n−3.692\n−10.004\nInf\n0.000\n\n\npoor_mental\n0.883\n0.088\n0.950\n0.713\n1.057\n10.077\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.2 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_pm &lt;- psmodel_pm$fitted\n\nchr_fin1$linps_pm &lt;- psmodel_pm$linear.predictors\n\n\n\n\n10.1.5.1.3 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_pm + linps_pm ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_pm\nHigh\n0.146\n0.376\n0.463\n0.552\n0.785\n0.465\n0.123\n777\n0\n\n\nps_pm\nLow\n0.150\n0.448\n0.549\n0.632\n0.875\n0.535\n0.132\n777\n0\n\n\nlinps_pm\nHigh\n−1.766\n−0.505\n−0.147\n0.209\n1.294\n−0.151\n0.523\n777\n0\n\n\nlinps_pm\nLow\n−1.738\n−0.207\n0.196\n0.542\n1.945\n0.148\n0.568\n777\n0\n\n\n\n\n\n\n\nThe poor_mental variable looks has two linear PS less than 0.01 and above 1.\n\n\n10.1.5.1.4 food_index\n\n\nCode\npsmodel_fi &lt;- glm(dentist_grp ~  food_index, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_fi) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n3.505\n0.360\n0.950\n2.812\n4.225\n9.727\nInf\n0.000\n\n\nfood_index\n−0.462\n0.047\n0.950\n−0.555\n−0.372\n−9.911\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.5 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_fi &lt;- psmodel_fi$fitted\n\nchr_fin1$linps_fi &lt;- psmodel_fi$linear.predictors\n\n\n\n\n10.1.5.1.6 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_fi + linps_fi ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_fi\nHigh\n0.256\n0.374\n0.441\n0.522\n0.948\n0.462\n0.120\n777\n0\n\n\nps_fi\nLow\n0.247\n0.441\n0.522\n0.612\n0.971\n0.538\n0.137\n777\n0\n\n\nlinps_fi\nHigh\n−1.068\n−0.514\n−0.237\n0.086\n2.904\n−0.144\n0.545\n777\n0\n\n\nlinps_fi\nLow\n−1.115\n−0.237\n0.086\n0.456\n3.505\n0.182\n0.638\n777\n0\n\n\n\n\n\n\n\nThe food_index variable has two linear PS less than 0.01 and above 1. All PS values are close to 0.99 or above, therefore, it will be removed.\n\n\n10.1.5.1.7 uninsured\n\n\nCode\npsmodel_un &lt;- glm(dentist_grp ~  uninsured, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_un) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−1.945\n0.148\n0.950\n−2.240\n−1.659\n−13.136\nInf\n0.000\n\n\nuninsured\n17.458\n1.276\n0.950\n15.005\n20.009\n13.682\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.8 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_un &lt;- psmodel_un$fitted\n\nchr_fin1$linps_un &lt;- psmodel_un$linear.predictors\n\n\n\n\n10.1.5.1.9 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_un + linps_un ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_un\nHigh\n0.178\n0.303\n0.382\n0.530\n0.944\n0.427\n0.159\n777\n0\n\n\nps_un\nLow\n0.232\n0.406\n0.559\n0.727\n0.998\n0.573\n0.193\n777\n0\n\n\nlinps_un\nHigh\n−1.528\n−0.834\n−0.481\n0.120\n2.832\n−0.303\n0.716\n777\n0\n\n\nlinps_un\nLow\n−1.197\n−0.382\n0.238\n0.978\n6.142\n0.399\n0.997\n777\n0\n\n\n\n\n\n\n\nThe uninsured variable has two linear PS less than 0.01 and above 1. All PS values are close to 0.99 or above, therefore, it will be removed.\n\n\n10.1.5.1.10 income_inequality\n\n\nCode\npsmodel_ii &lt;- glm(dentist_grp ~  income_inequality, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_ii) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−0.471\n0.279\n0.950\n−1.021\n0.074\n−1.689\nInf\n0.091\n\n\nincome_inequality\n0.103\n0.060\n0.950\n−0.014\n0.221\n1.717\nInf\n0.086\n\n\n\n\n\n\n\n\n\n10.1.5.1.11 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_ii &lt;- psmodel_ii$fitted\n\nchr_fin1$linps_ii &lt;- psmodel_ii$linear.predictors\n\n\n\n\n10.1.5.1.12 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_ii + linps_ii ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_ii\nHigh\n0.448\n0.487\n0.496\n0.508\n0.599\n0.499\n0.019\n777\n0\n\n\nps_ii\nLow\n0.425\n0.485\n0.497\n0.512\n0.649\n0.501\n0.024\n777\n0\n\n\nlinps_ii\nHigh\n−0.210\n−0.052\n−0.016\n0.034\n0.401\n−0.004\n0.076\n777\n0\n\n\nlinps_ii\nLow\n−0.301\n−0.059\n−0.011\n0.050\n0.614\n0.004\n0.098\n777\n0\n\n\n\n\n\n\n\nThe income_inequality has two linear propensity scores less than 0.01 and above 1.\n\n\n10.1.5.1.13 primary_care\n\n\nCode\npsmodel_pc &lt;- glm(dentist_grp ~  primary_care, \n                family = binomial(), data= chr_fin1)\n\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\n\nCode\nmodel_parameters(psmodel_pc) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n3.190\n0.167\n0.950\n2.872\n3.525\n19.152\nInf\n0.000\n\n\nprimary_care\n−5,829.786\n288.884\n0.950\n−6,412.009\n−5,278.912\n−20.180\nInf\n0.000\n\n\n\n\n\n\n\nThis variable has an exploding coefficient.\n\n\n10.1.5.1.14 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_pc &lt;- psmodel_pc$fitted\n\nchr_fin1$linps_pc &lt;- psmodel_pc$linear.predictors\n\n\n\n\n10.1.5.1.15 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_pc + linps_pc ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_pc\nHigh\n0.000\n0.064\n0.195\n0.445\n0.960\n0.276\n0.252\n777\n0\n\n\nps_pc\nLow\n0.001\n0.627\n0.815\n0.901\n0.960\n0.724\n0.237\n777\n0\n\n\nlinps_pc\nHigh\n−30.653\n−2.687\n−1.417\n−0.222\n3.190\n−1.684\n2.569\n777\n0\n\n\nlinps_pc\nLow\n−6.747\n0.520\n1.480\n2.212\n3.190\n1.218\n1.415\n777\n0\n\n\n\n\n\n\n\nThe primary_care variable has all propensity scores as less than 0.01 and above 1. This variable will be removed from the analysis.\n\n\n10.1.5.1.16 mental_care\n\n\nCode\npsmodel_mc &lt;- glm(dentist_grp ~  mental_care, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_mc) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−1.232\n0.087\n0.950\n−1.404\n−1.064\n−14.208\nInf\n0.000\n\n\nmental_care\n0.001\n0.000\n0.950\n0.001\n0.001\n15.128\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.17 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_mc &lt;- psmodel_mc$fitted\n\nchr_fin1$linps_mc &lt;- psmodel_mc$linear.predictors\n\n\n\n\n10.1.5.1.18 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_mc + linps_mc ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_mc\nHigh\n0.092\n0.276\n0.299\n0.339\n1.000\n0.345\n0.148\n777\n0\n\n\nps_mc\nLow\n0.087\n0.437\n0.666\n0.897\n1.000\n0.655\n0.256\n777\n0\n\n\nlinps_mc\nHigh\n−2.293\n−0.963\n−0.850\n−0.668\n14.836\n−0.576\n1.171\n777\n0\n\n\nlinps_mc\nLow\n−2.349\n−0.253\n0.689\n2.165\n25.878\n1.637\n3.334\n777\n0\n\n\n\n\n\n\n\nThe mental_care variable has all ps values smaller than 0.01 and above 1. This variable will be removed from the analysis.\n\n\n10.1.5.1.19 highschool_grad\n\n\nCode\npsmodel_hs &lt;- glm(dentist_grp ~  highschool_grad, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_hs) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−4.943\n0.719\n0.950\n−6.382\n−3.564\n−6.872\nInf\n0.000\n\n\nhighschool_grad\n5.612\n0.812\n0.950\n4.053\n7.235\n6.910\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.20 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_hs &lt;- psmodel_hs$fitted\n\nchr_fin1$linps_hs &lt;- psmodel_hs$linear.predictors\n\n\n\n\n10.1.5.1.21 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_hs + linps_hs ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_hs\nHigh\n0.019\n0.429\n0.491\n0.545\n0.637\n0.479\n0.092\n777\n0\n\n\nps_hs\nLow\n0.019\n0.492\n0.540\n0.573\n0.647\n0.521\n0.090\n777\n0\n\n\nlinps_hs\nHigh\n−3.961\n−0.288\n−0.035\n0.182\n0.564\n−0.093\n0.411\n777\n0\n\n\nlinps_hs\nLow\n−3.961\n−0.033\n0.160\n0.295\n0.608\n0.068\n0.464\n777\n0\n\n\n\n\n\n\n\nThe highschool_grad variable has two PS value less than 0.01, but overall looks acceptable.\n\n\n10.1.5.1.22 some_college\n\n\nCode\npsmodel_sc &lt;- glm(dentist_grp ~  some_college, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_sc) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n6.212\n0.360\n0.950\n5.521\n6.934\n17.250\nInf\n0.000\n\n\nsome_college\n−10.244\n0.582\n0.950\n−11.410\n−9.126\n−17.587\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.23 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_sc &lt;- psmodel_sc$fitted\n\nchr_fin1$linps_sc &lt;- psmodel_sc$linear.predictors\n\n\n\n\n10.1.5.1.24 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_sc + linps_sc ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_sc\nHigh\n0.035\n0.218\n0.322\n0.490\n0.983\n0.366\n0.200\n777\n0\n\n\nps_sc\nLow\n0.017\n0.476\n0.682\n0.823\n0.993\n0.634\n0.234\n777\n0\n\n\nlinps_sc\nHigh\n−3.320\n−1.276\n−0.744\n−0.040\n4.080\n−0.641\n1.015\n777\n0\n\n\nlinps_sc\nLow\n−4.031\n−0.095\n0.762\n1.535\n5.007\n0.697\n1.269\n777\n0\n\n\n\n\n\n\n\nThe some_college variable has two linear PS value less than 0.01 and 3 above 0.99. This variable will be removed.\n\n\n10.1.5.1.25 unemployment\n\n\nCode\npsmodel_ue &lt;- glm(dentist_grp ~  unemployment, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_ue) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−0.221\n0.162\n0.950\n−0.541\n0.096\n−1.364\nInf\n0.173\n\n\nunemployment\n6.279\n4.373\n0.950\n−2.273\n14.890\n1.436\nInf\n0.151\n\n\n\n\n\n\n\n\n\n10.1.5.1.26 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_ue &lt;- psmodel_ue$fitted\n\nchr_fin1$linps_ue &lt;- psmodel_ue$linear.predictors\n\n\n\n\n10.1.5.1.27 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_ue + linps_ue ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_ue\nHigh\n0.466\n0.486\n0.497\n0.509\n0.595\n0.499\n0.018\n777\n0\n\n\nps_ue\nLow\n0.454\n0.487\n0.498\n0.510\n0.614\n0.501\n0.019\n777\n0\n\n\nlinps_ue\nHigh\n−0.137\n−0.055\n−0.014\n0.036\n0.383\n−0.003\n0.072\n777\n0\n\n\nlinps_ue\nLow\n−0.186\n−0.051\n−0.008\n0.041\n0.466\n0.003\n0.075\n777\n0\n\n\n\n\n\n\n\nThe unemployment variable has two linear PS values less than 0.01, but overall looks acceptable.\n\n\n10.1.5.1.28 social_score\n\n\nCode\npsmodel_ss &lt;- glm(dentist_grp ~  social_score, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_ss) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n0.034\n0.101\n0.950\n−0.164\n0.232\n0.332\nInf\n0.740\n\n\nsocial_score\n−0.003\n0.008\n0.950\n−0.019\n0.013\n−0.384\nInf\n0.701\n\n\n\n\n\n\n\n\n\n10.1.5.1.29 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_ss &lt;- psmodel_ss$fitted\n\nchr_fin1$linps_ss &lt;- psmodel_ss$linear.predictors\n\n\n\n\n10.1.5.1.30 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_ss + linps_ss ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_ss\nHigh\n0.479\n0.498\n0.500\n0.502\n0.508\n0.500\n0.004\n777\n0\n\n\nps_ss\nLow\n0.463\n0.497\n0.501\n0.503\n0.508\n0.500\n0.006\n777\n0\n\n\nlinps_ss\nHigh\n−0.083\n−0.007\n0.002\n0.009\n0.034\n0.000\n0.016\n777\n0\n\n\nlinps_ss\nLow\n−0.149\n−0.011\n0.002\n0.014\n0.034\n0.000\n0.023\n777\n0\n\n\n\n\n\n\n\nThe social_score has two linear PS values less than 0.01, but overall looks acceptable.\n\n\n10.1.5.1.31 life_expectancy\n\n\nCode\npsmodel_le &lt;- glm(dentist_grp ~  life_expectancy, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_le) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n15.042\n1.291\n0.950\n12.551\n17.613\n11.652\nInf\n0.000\n\n\nlife_expectancy\n−0.198\n0.017\n0.950\n−0.231\n−0.165\n−11.665\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.32 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_le &lt;- psmodel_le$fitted\n\nchr_fin1$linps_le &lt;- psmodel_le$linear.predictors\n\n\n\n\n10.1.5.1.33 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_le + linps_le ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_le\nHigh\n0.034\n0.344\n0.433\n0.532\n0.982\n0.447\n0.149\n777\n0\n\n\nps_le\nLow\n0.049\n0.446\n0.568\n0.664\n0.960\n0.553\n0.148\n777\n0\n\n\nlinps_le\nHigh\n−3.333\n−0.644\n−0.268\n0.128\n3.994\n−0.222\n0.705\n777\n0\n\n\nlinps_le\nLow\n−2.967\n−0.215\n0.273\n0.680\n3.167\n0.227\n0.665\n777\n0\n\n\n\n\n\n\n\nThe life_expectancy variable has two linear PS less than 0.01 and above 1. The other PS values are also problematic, therefore, it will be removed.\n\n\n10.1.5.1.34 insuff_sleep\n\n\nCode\npsmodel_is &lt;- glm(dentist_grp ~  insuff_sleep, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_is) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−6.637\n0.536\n0.950\n−7.704\n−5.600\n−12.371\nInf\n0.000\n\n\ninsuff_sleep\n19.431\n1.565\n0.950\n16.407\n22.546\n12.412\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.35 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_is &lt;- psmodel_is$fitted\n\nchr_fin1$linps_is &lt;- psmodel_is$linear.predictors\n\n\n\n\n10.1.5.1.36 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_is + linps_is ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_is\nHigh\n0.118\n0.334\n0.425\n0.541\n0.880\n0.444\n0.154\n777\n0\n\n\nps_is\nLow\n0.190\n0.439\n0.560\n0.674\n0.922\n0.556\n0.160\n777\n0\n\n\nlinps_is\nHigh\n−2.012\n−0.691\n−0.303\n0.164\n1.990\n−0.239\n0.685\n777\n0\n\n\nlinps_is\nLow\n−1.449\n−0.244\n0.242\n0.727\n2.476\n0.254\n0.719\n777\n0\n\n\n\n\n\n\n\nThe insuff_sleep variable has two linear PS less than 0.01 and above 1.\n\n\n10.1.5.1.37 home_ownership\n\n\nCode\npsmodel_ho &lt;- glm(dentist_grp ~  home_ownership, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_ho) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−8.754\n0.592\n0.950\n−9.940\n−7.618\n−14.787\nInf\n0.000\n\n\nhome_ownership\n12.103\n0.809\n0.950\n10.551\n13.723\n14.966\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.38 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_ho &lt;- psmodel_ho$fitted\n\nchr_fin1$linps_ho &lt;- psmodel_ho$linear.predictors\n\n\n\n\n10.1.5.1.39 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_ho + linps_ho ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_ho\nHigh\n0.003\n0.240\n0.397\n0.556\n0.897\n0.401\n0.207\n777\n0\n\n\nps_ho\nLow\n0.000\n0.507\n0.626\n0.726\n0.927\n0.599\n0.175\n777\n0\n\n\nlinps_ho\nHigh\n−5.810\n−1.150\n−0.418\n0.227\n2.169\n−0.545\n1.155\n777\n0\n\n\nlinps_ho\nLow\n−8.754\n0.029\n0.514\n0.974\n2.544\n0.415\n0.945\n777\n0\n\n\n\n\n\n\n\nThe home_ownership variable has all PS values in problematic levels. Therefore, it will be removed.\n\n\n10.1.5.1.40 housing_burden\n\n\nCode\npsmodel_hb &lt;- glm(dentist_grp ~  housing_burden, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_hb) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n2.601\n0.196\n0.950\n2.223\n2.991\n13.274\nInf\n0.000\n\n\nhousing_burden\n−23.546\n1.724\n0.950\n−26.990\n−20.228\n−13.659\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.41 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_hb &lt;- psmodel_hb$fitted\n\nchr_fin1$linps_hb &lt;- psmodel_hb$linear.predictors\n\n\n\n\n10.1.5.1.42 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_hb + linps_hb ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_hb\nHigh\n0.030\n0.296\n0.428\n0.562\n0.890\n0.427\n0.181\n777\n0\n\n\nps_hb\nLow\n0.017\n0.476\n0.598\n0.690\n0.921\n0.573\n0.167\n777\n0\n\n\nlinps_hb\nHigh\n−3.483\n−0.868\n−0.289\n0.250\n2.090\n−0.358\n0.878\n777\n0\n\n\nlinps_hb\nLow\n−4.037\n−0.097\n0.397\n0.801\n2.461\n0.312\n0.785\n777\n0\n\n\n\n\n\n\n\nThe housing_burden variable has two linear PS less than 0.01 and above 1. All PS values are close to 0.99 or above, therefore, it will be removed.\n\n\n10.1.5.1.43 below_18\n\n\nCode\npsmodel_b18 &lt;- glm(dentist_grp ~  below_18, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_b18) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−0.147\n0.311\n0.950\n−0.758\n0.463\n−0.472\nInf\n0.637\n\n\nbelow_18\n0.684\n1.430\n0.950\n−2.118\n3.492\n0.479\nInf\n0.632\n\n\n\n\n\n\n\n\n\n10.1.5.1.44 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_b18 &lt;- psmodel_b18$fitted\n\nchr_fin1$linps_b18 &lt;- psmodel_b18$linear.predictors\n\n\n\n\n10.1.5.1.45 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_b18 + linps_b18 ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_b18\nHigh\n0.480\n0.496\n0.500\n0.503\n0.526\n0.500\n0.006\n777\n0\n\n\nps_b18\nLow\n0.467\n0.497\n0.500\n0.503\n0.525\n0.500\n0.006\n777\n0\n\n\nlinps_b18\nHigh\n−0.081\n−0.015\n0.000\n0.012\n0.106\n0.000\n0.024\n777\n0\n\n\nlinps_b18\nLow\n−0.130\n−0.013\n0.001\n0.013\n0.101\n0.000\n0.025\n777\n0\n\n\n\n\n\n\n\nThe below_18 variable has two linear PS values less than 0.01 (0.00). Otherwise it looks acceptable.\n\n\n10.1.5.1.46 above_65\n\n\nCode\npsmodel_a65 &lt;- glm(dentist_grp ~  above_65, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_a65) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−1.663\n0.228\n0.950\n−2.115\n−1.220\n−7.286\nInf\n0.000\n\n\nabove_65\n8.110\n1.088\n0.950\n6.001\n10.268\n7.454\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.47 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_a65 &lt;- psmodel_a65$fitted\n\nchr_fin1$linps_a65 &lt;- psmodel_a65$linear.predictors\n\n\n\n\n10.1.5.1.48 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_a65 + linps_a65 ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_a65\nHigh\n0.228\n0.416\n0.464\n0.534\n0.805\n0.481\n0.097\n777\n0\n\n\nps_a65\nLow\n0.264\n0.462\n0.511\n0.576\n0.866\n0.519\n0.093\n777\n0\n\n\nlinps_a65\nHigh\n−1.222\n−0.340\n−0.146\n0.136\n1.418\n−0.076\n0.404\n777\n0\n\n\nlinps_a65\nLow\n−1.025\n−0.153\n0.046\n0.307\n1.865\n0.082\n0.395\n777\n0\n\n\n\n\n\n\n\nThe above_65 variable has two linear PS less than 0.01 and above 1.\n\n\n10.1.5.1.49 asian\n\n\nCode\npsmodel_as &lt;- glm(dentist_grp ~  asian, \n                family = binomial(), data= chr_fin1)\n\n\nWarning: glm.fit: fitted probabilities numerically 0 or 1 occurred\n\n\nCode\nmodel_parameters(psmodel_as) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n1.692\n0.108\n0.950\n1.484\n1.908\n15.654\nInf\n0.000\n\n\nasian\n−132.404\n9.115\n0.950\n−150.928\n−115.192\n−14.526\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.50 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_as &lt;- psmodel_as$fitted\n\nchr_fin1$linps_as &lt;- psmodel_as$linear.predictors\n\n\n\n\n10.1.5.1.51 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_as + linps_as ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_as\nHigh\n0.000\n0.023\n0.337\n0.628\n0.844\n0.333\n0.287\n777\n0\n\n\nps_as\nLow\n0.000\n0.639\n0.711\n0.764\n0.844\n0.667\n0.150\n777\n0\n\n\nlinps_as\nHigh\n−54.682\n−3.745\n−0.678\n0.524\n1.692\n−3.050\n6.809\n777\n0\n\n\nlinps_as\nLow\n−10.225\n0.571\n0.903\n1.175\n1.692\n0.691\n0.919\n777\n0\n\n\n\n\n\n\n\nThe asian variable has multiple PS values in problematic levels, therefore, it will be removed.\n\n\n10.1.5.1.52 female\n\n\nCode\npsmodel_fm &lt;- glm(dentist_grp ~  female, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_fm) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n11.219\n1.477\n0.950\n8.411\n14.199\n7.598\nInf\n0.000\n\n\nfemale\n−22.627\n2.969\n0.950\n−28.616\n−16.976\n−7.620\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.53 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_fm &lt;- psmodel_fm$fitted\n\nchr_fin1$linps_fm &lt;- psmodel_fm$linear.predictors\n\n\n\n\n10.1.5.1.54 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_fm + linps_fm ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_fm\nHigh\n0.232\n0.428\n0.467\n0.510\n0.990\n0.476\n0.084\n777\n0\n\n\nps_fm\nLow\n0.136\n0.453\n0.502\n0.558\n0.998\n0.524\n0.120\n777\n0\n\n\nlinps_fm\nHigh\n−1.195\n−0.288\n−0.133\n0.038\n4.628\n−0.090\n0.400\n777\n0\n\n\nlinps_fm\nLow\n−1.851\n−0.187\n0.010\n0.234\n6.339\n0.135\n0.649\n777\n0\n\n\n\n\n\n\n\nThe female variable has two linear PS less than 0.01 all PS values at or above 0.99. Therefore, it will be removed.\n\n\n10.1.5.1.55 rural\n\n\nCode\npsmodel_rl &lt;- glm(dentist_grp ~  rural, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_rl) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−3.521\n0.185\n0.950\n−3.894\n−3.170\n−19.076\nInf\n0.000\n\n\nrural\n5.291\n0.240\n0.950\n4.834\n5.773\n22.093\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.56 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_rl &lt;- psmodel_rl$fitted\n\nchr_fin1$linps_rl &lt;- psmodel_rl$linear.predictors\n\n\n\n\n10.1.5.1.57 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_rl + linps_rl ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_rl\nHigh\n0.029\n0.049\n0.118\n0.366\n0.854\n0.262\n0.292\n777\n0\n\n\nps_rl\nLow\n0.029\n0.658\n0.854\n0.854\n0.854\n0.738\n0.202\n777\n0\n\n\nlinps_rl\nHigh\n−3.521\n−2.958\n−2.011\n−0.552\n1.770\n−1.525\n1.755\n777\n0\n\n\nlinps_rl\nLow\n−3.493\n0.653\n1.770\n1.770\n1.770\n1.176\n1.018\n777\n0\n\n\n\n\n\n\n\nThe rural variable has two linear PS less than 0.01 and value above 1. We might remove this variable.\n\n\n10.1.5.1.58 obesity\n\n\nCode\npsmodel_ob &lt;- glm(dentist_grp ~  obesity, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_ob) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−8.412\n0.549\n0.950\n−9.512\n−7.360\n−15.327\nInf\n0.000\n\n\nobesity\n22.823\n1.472\n0.950\n20.000\n25.773\n15.504\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.59 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_ob &lt;- psmodel_ob$fitted\n\nchr_fin1$linps_ob &lt;- psmodel_ob$linear.predictors\n\n\n\n\n10.1.5.1.60 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_ob + linps_ob ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_ob\nHigh\n0.012\n0.220\n0.390\n0.565\n0.944\n0.399\n0.221\n777\n0\n\n\nps_ob\nLow\n0.041\n0.491\n0.609\n0.734\n0.973\n0.601\n0.174\n777\n0\n\n\nlinps_ob\nHigh\n−4.440\n−1.268\n−0.446\n0.261\n2.817\n−0.542\n1.175\n777\n0\n\n\nlinps_ob\nLow\n−3.162\n−0.036\n0.444\n1.014\n3.570\n0.458\n0.850\n777\n0\n\n\n\n\n\n\n\nThe obesity variable has two linear PS less than 0.01 and all PS values around 0.99. We will remove this variable.\n\n\n10.1.5.1.61 segregation\n\n\nCode\npsmodel_se &lt;- glm(dentist_grp ~  segregation, \n                family = binomial(), data= chr_fin1)\n\nmodel_parameters(psmodel_se) |&gt; \n  gt() |&gt; fmt_number(decimals = 3) |&gt; \n  opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n2.099\n0.185\n0.950\n1.742\n2.468\n11.339\nInf\n0.000\n\n\nsegregation\n−0.041\n0.003\n0.950\n−0.048\n−0.035\n−11.916\nInf\n0.000\n\n\n\n\n\n\n\n\n\n10.1.5.1.62 Saving Propesnsity Score\nNow we will save the new propensity scores:\n\n\nCode\nchr_fin1$ps_se &lt;- psmodel_se$fitted\n\nchr_fin1$linps_se &lt;- psmodel_se$linear.predictors\n\n\n\n\n10.1.5.1.63 Comparing The PS Distribution of The Two Exposure Groups\n\n\nCode\ndf_stats(ps_se + linps_se ~ dentist_grp, data = chr_fin1) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps_se\nHigh\n0.165\n0.355\n0.445\n0.530\n0.886\n0.448\n0.135\n777\n0\n\n\nps_se\nLow\n0.145\n0.432\n0.565\n0.679\n0.886\n0.552\n0.166\n777\n0\n\n\nlinps_se\nHigh\n−1.618\n−0.595\n−0.222\n0.119\n2.055\n−0.217\n0.594\n777\n0\n\n\nlinps_se\nLow\n−1.776\n−0.275\n0.263\n0.749\n2.055\n0.233\n0.741\n777\n0\n\n\n\n\n\n\n\nThe segregation variable has two linear PS less than 0.01 and all PS values around 0.99. We might remove this variable.\n\n\n\n\n10.1.6 PS After Covariates Removal\nWe will start by building a subset for the first outcome in our analysis chr_fin2 after removing the problematic covariates from the original chr_fin set.\n\n\nCode\nchr_fin2 &lt;- chr_fin|&gt;\n  dplyr::select( -hispanic, -white, -black, -native, -ps0, -linps0, -food_index, -uninsured, -primary_care, -mental_care, -some_college, -life_expectancy, -housing_burden, -home_ownership, -female, -rural, -asian, -obesity)\n\n\nNow, we will build our psmodel1.\n\n\nCode\npsmodel1 &lt;- glm(dentist_grp ~  poor_mental + unemployment  + income_inequality + social_score + \n                  diabetes  + insuff_sleep + highschool_grad + segregation +\n                  below_18 + above_65 ,\n                family = binomial(), data= chr_fin2)\n\nmodel_parameters(psmodel1) |&gt; \n  gt() |&gt; gt::fmt_number(decimals = 3) |&gt; \n  gt::opt_stylize(style = 1, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nz\ndf_error\np\n\n\n\n\n(Intercept)\n−15.234\n1.450\n0.950\n−18.122\n−12.435\n−10.508\nInf\n0.000\n\n\npoor_mental\n0.415\n0.146\n0.950\n0.130\n0.703\n2.839\nInf\n0.005\n\n\nunemployment\n−32.170\n6.628\n0.950\n−45.231\n−19.222\n−4.854\nInf\n0.000\n\n\nincome_inequality\n−0.568\n0.098\n0.950\n−0.764\n−0.378\n−5.779\nInf\n0.000\n\n\nsocial_score\n−0.024\n0.010\n0.950\n−0.045\n−0.004\n−2.364\nInf\n0.018\n\n\ndiabetes\n57.055\n5.926\n0.950\n45.665\n68.906\n9.629\nInf\n0.000\n\n\ninsuff_sleep\n2.959\n3.121\n0.950\n−3.167\n9.078\n0.948\nInf\n0.343\n\n\nhighschool_grad\n6.238\n0.875\n0.950\n4.558\n8.003\n7.132\nInf\n0.000\n\n\nsegregation\n−0.027\n0.004\n0.950\n−0.036\n−0.019\n−6.547\nInf\n0.000\n\n\nbelow_18\n7.428\n2.417\n0.950\n2.711\n12.196\n3.073\nInf\n0.002\n\n\nabove_65\n21.644\n1.817\n0.950\n18.152\n25.280\n11.912\nInf\n0.000\n\n\n\n\n\n\n\n\n\nCode\nchr_fin2$ps1 &lt;- psmodel1$fitted\n\nchr_fin2$linps1 &lt;- psmodel1$linear.predictors\n\n\n\n\nCode\ndf_stats(ps1 + linps1 ~ dentist_grp, data = chr_fin2) |&gt;\n  gt() |&gt; fmt_number(columns = c(-n, -missing), decimals = 3) |&gt; \n  opt_stylize(style = 2, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nps1\nHigh\n0.002\n0.129\n0.257\n0.463\n0.993\n0.320\n0.240\n777\n0\n\n\nps1\nLow\n0.005\n0.528\n0.731\n0.872\n0.999\n0.680\n0.232\n777\n0\n\n\nlinps1\nHigh\n−6.437\n−1.911\n−1.063\n−0.150\n4.940\n−0.987\n1.448\n777\n0\n\n\nlinps1\nLow\n−5.230\n0.112\n1.000\n1.923\n6.709\n1.032\n1.435\n777\n0\n\n\n\n\n\n\n\n\nThe problematic values in the propensity score are persistent and we will need to investigate this using other methods. For now, we will proceed to the analysis phase.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#the-blanace-before-ps-adjustment",
    "href": "project_06.html#the-blanace-before-ps-adjustment",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "11.1 The Blanace Before PS Adjustment",
    "text": "11.1 The Blanace Before PS Adjustment\n\n\nCode\nggplot(chr_fin2, aes(x = dentist_grp, y = ps1, color = dentist_grp)) + \n    geom_boxplot() +\n    geom_jitter(width = 0.1) + \n    guides(color = \"none\")\n\n\n\n\n\n\n\n\n\n\n\nCode\nggplot(chr_fin2, aes(x = linps1, fill = dentist_grp)) +\n    geom_density(alpha = 0.3)\n\n\n\n\n\n\n\n\n\n\nThere is a good overlap between the two groups.\n\n\n11.1.1 Rubin’s Rule 1\n\n\nCode\nrubin1.unadj &lt;- with(chr_fin2,\n     abs(100*(mean(linps1[dentist_n==1])-mean(linps1[dentist_n==0]))/sd(linps1)))\nrubin1.unadj\n\n\n[1] 114.7657\n\n\nThe absolute value of the standardized difference of the linear propensity score comparing the counties with high dentist proportions and low dentist proportions is 114.8%. This value is too far from the ideal value of 0% and above the maximum acceptable value of 50 %. We definitely do not pass Rubin’s rule 1, therefore, propensity score adjustment is needed.\n\n\n11.1.2 Rubin’s Rule 2\n\n\nCode\nrubin2.unadj &lt;-with(chr_fin2, var(linps1[dentist_n==1])/var(linps1[dentist_n==0]))\nrubin2.unadj\n\n\n[1] 0.9818352\n\n\nThe ratio of variances of the linear propensity score comparing the counties with high dentist proportions and low dentist proportions is 0.98. This value is very close to the desired value of 1.0. In this case, we pass Rubin’s Rule 2.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#unadjusted-outcome-1-smoking_prop",
    "href": "project_06.html#unadjusted-outcome-1-smoking_prop",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "11.2 Unadjusted Outcome 1 smoking_prop",
    "text": "11.2 Unadjusted Outcome 1 smoking_prop\nWe will observe the the distribution of the outcome smoking_prop among the two exposure groups dentist_grp.\n\n\nCode\ndf_stats(smoking_prop ~ dentist_grp, data = chr_fin2) |&gt;\n  gt() |&gt; fmt_number(mean:sd, decimals = 2) |&gt;\n  opt_stylize(style = 5, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\nsmoking_prop\nHigh\n6.821752\n14.04568\n15.86923\n18.30110\n37.02901\n16.41\n3.68\n777\n0\n\n\nsmoking_prop\nLow\n7.687424\n15.68921\n18.72868\n21.37735\n41.20176\n18.78\n3.76\n777\n0\n\n\n\n\n\n\n\nThe high dentist group has a lower mean of smoking proportions (16.4 vs 18.8).\n\n11.2.1 Linear Regression Model for Outcome 1\nWe will build a linear regression model for outcome 1 smoking_prop and the exposure dentist_prop without including the covariates.\n\n\nCode\nunadj.out1 &lt;- lm(smoking_prop ~ dentist_grp, data= chr_fin2)\n\nmodel_parameters(unadj.out1, ci = 0.95) |&gt; \n  gt() |&gt; fmt_number(columns = -df_error, decimals = 3) |&gt;\n  opt_stylize(style = 6, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nt\ndf_error\np\n\n\n\n\n(Intercept)\n16.412\n0.133\n0.950\n16.150\n16.673\n123.071\n1552\n0.000\n\n\ndentist_grpLow\n2.364\n0.189\n0.950\n1.994\n2.734\n12.533\n1552\n0.000\n\n\n\n\n\n\n\n\nThe unadjusted model estimates that low dentist proportions increases smoking prevalence in US counties by 2.36 percentage points (95% CI: 1.99, 2.73).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#matching-with-replacement",
    "href": "project_06.html#matching-with-replacement",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "11.3 1:1 Matching With Replacement",
    "text": "11.3 1:1 Matching With Replacement\nThe binary exposure has an equal number of observations in each group (n=777). Therefore, we will use 1:1 matching with replacement.\n\n\nCode\nX &lt;- chr_fin2$linps1 \nTr &lt;- as.logical(chr_fin2$dentist_n)\nmatch1 &lt;- Match(Tr=Tr, X=X, M = 1, replace = TRUE, ties=FALSE)\nsummary(match1)\n\n\n\nEstimate...  0 \nSE.........  0 \nT-stat.....  NaN \np.val......  NA \n\nOriginal number of observations..............  1554 \nOriginal number of treated obs...............  777 \nMatched number of observations...............  777 \nMatched number of observations  (unweighted).  777 \n\n\nchecking if matching worked:\n\n\nCode\nn_distinct(match1$index.treated)\n\n\n[1] 777\n\n\n\n\nCode\nn_distinct(match1$index.control)\n\n\n[1] 278\n\n\n\nAfter 1:1 matching with replacement, the effective size was reduced to 272 matched counties from the treatment and control group.\n\n\n11.3.1 Balance Assessment\n\n\nCode\nset.seed(500)\nmb1 &lt;- MatchBalance(dentist_n ~ poor_mental + unemployment  + income_inequality + social_score + \n                  diabetes  + insuff_sleep + highschool_grad + segregation +\n                  below_18 + above_65 + ps1 + linps1, \n                  data= chr_fin2, \n                    match.out = match1, nboots=500)\n\n\n\n***** (V1) poor_mental *****\n                       Before Matching       After Matching\nmean treatment........      5.354             5.354 \nmean control..........     5.0152            5.2984 \nstd mean diff.........     52.617            8.6282 \n\nmean raw eQQ diff.....    0.34041          0.082562 \nmed  raw eQQ diff.....    0.36298          0.073533 \nmax  raw eQQ diff.....    0.73693           0.73693 \n\nmean eCDF diff........    0.16003          0.034772 \nmed  eCDF diff........    0.18919          0.027027 \nmax  eCDF diff........    0.24324           0.10296 \n\nvar ratio (Tr/Co).....       1.18            1.0251 \nT-test p-value........ &lt; 2.22e-16          0.068521 \nKS Bootstrap p-value.. &lt; 2.22e-16             0.002 \nKS Naive p-value...... &lt; 2.22e-16        0.00052946 \nKS Statistic..........    0.24324           0.10296 \n\n\n***** (V2) unemployment *****\n                       Before Matching       After Matching\nmean treatment........   0.035706          0.035706 \nmean control..........   0.034857          0.035613 \nstd mean diff.........     7.1471           0.77874 \n\nmean raw eQQ diff.....  0.0010747         0.0010116 \nmed  raw eQQ diff.....   0.001005        0.00071892 \nmax  raw eQQ diff.....   0.013165          0.018658 \n\nmean eCDF diff........   0.025066          0.020112 \nmed  eCDF diff........   0.020592          0.015444 \nmax  eCDF diff........   0.059202          0.065637 \n\nvar ratio (Tr/Co).....     1.0862            1.0782 \nT-test p-value........    0.15077            0.8748 \nKS Bootstrap p-value..      0.146             0.072 \nKS Naive p-value......    0.13128          0.070342 \nKS Statistic..........   0.059202          0.065637 \n\n\n***** (V3) income_inequality *****\n                       Before Matching       After Matching\nmean treatment........     4.6117            4.6117 \nmean control..........     4.5373            4.6189 \nstd mean diff.........     7.7974          -0.75458 \n\nmean raw eQQ diff.....    0.15959           0.12362 \nmed  raw eQQ diff.....    0.10178          0.062316 \nmax  raw eQQ diff.....     2.0677            2.5917 \n\nmean eCDF diff........   0.037661          0.024458 \nmed  eCDF diff........   0.041184          0.024453 \nmax  eCDF diff........   0.073359          0.056628 \n\nvar ratio (Tr/Co).....     1.6836            1.6035 \nT-test p-value........   0.085366            0.8694 \nKS Bootstrap p-value..      0.032             0.182 \nKS Naive p-value......   0.030552           0.16546 \nKS Statistic..........   0.073359          0.056628 \n\n\n***** (V4) social_score *****\n                       Before Matching       After Matching\nmean treatment........     10.845            10.845 \nmean control..........     10.969            11.278 \nstd mean diff.........    -1.6808           -5.8744 \n\nmean raw eQQ diff.....     1.7301           0.88592 \nmed  raw eQQ diff.....     1.2191           0.90882 \nmax  raw eQQ diff.....     21.371            21.456 \n\nmean eCDF diff........   0.059115          0.046787 \nmed  eCDF diff........   0.052767           0.05148 \nmax  eCDF diff........    0.12999          0.095238 \n\nvar ratio (Tr/Co).....     2.0485            1.2144 \nT-test p-value........    0.70099            0.2186 \nKS Bootstrap p-value.. &lt; 2.22e-16             0.004 \nKS Naive p-value...... 3.9747e-06          0.001739 \nKS Statistic..........    0.12999          0.095238 \n\n\n***** (V5) diabetes *****\n                       Before Matching       After Matching\nmean treatment........    0.11284           0.11284 \nmean control..........   0.095932           0.11175 \nstd mean diff.........     71.142            4.5818 \n\nmean raw eQQ diff.....   0.016906         0.0019331 \nmed  raw eQQ diff.....      0.018             0.001 \nmax  raw eQQ diff.....      0.033             0.045 \n\nmean eCDF diff........    0.13194          0.014661 \nmed  eCDF diff........   0.099743          0.010296 \nmax  eCDF diff........    0.34234          0.061776 \n\nvar ratio (Tr/Co).....     1.5867            1.0317 \nT-test p-value........ &lt; 2.22e-16           0.27851 \nKS Bootstrap p-value.. &lt; 2.22e-16             0.074 \nKS Naive p-value...... &lt; 2.22e-16           0.10308 \nKS Statistic..........    0.34234          0.061776 \n\n\n***** (V6) insuff_sleep *****\n                       Before Matching       After Matching\nmean treatment........    0.35465           0.35465 \nmean control..........    0.32925           0.35599 \nstd mean diff.........     68.689           -3.6185 \n\nmean raw eQQ diff.....     0.0254         0.0078744 \nmed  raw eQQ diff.....      0.027             0.006 \nmax  raw eQQ diff.....      0.032             0.029 \n\nmean eCDF diff........    0.13895          0.042921 \nmed  eCDF diff........    0.11583          0.043115 \nmax  eCDF diff........     0.3166           0.10682 \n\nvar ratio (Tr/Co).....     1.1012           0.73316 \nT-test p-value........ &lt; 2.22e-16           0.47547 \nKS Bootstrap p-value.. &lt; 2.22e-16        &lt; 2.22e-16 \nKS Naive p-value...... &lt; 2.22e-16        0.00028217 \nKS Statistic..........     0.3166           0.10682 \n\n\n***** (V7) highschool_grad *****\n                       Before Matching       After Matching\nmean treatment........    0.89305           0.89305 \nmean control..........    0.86432           0.88698 \nstd mean diff.........      34.78            7.3467 \n\nmean raw eQQ diff.....   0.033037          0.012742 \nmed  raw eQQ diff.....   0.029953              0.01 \nmax  raw eQQ diff.....    0.37636           0.37636 \n\nmean eCDF diff........    0.15082          0.047224 \nmed  eCDF diff........    0.16345          0.045045 \nmax  eCDF diff........    0.26641           0.13256 \n\nvar ratio (Tr/Co).....     1.2754            1.4269 \nT-test p-value........ 6.2084e-13           0.11513 \nKS Bootstrap p-value.. &lt; 2.22e-16        &lt; 2.22e-16 \nKS Naive p-value...... &lt; 2.22e-16         2.351e-06 \nKS Statistic..........    0.26641           0.13256 \n\n\n***** (V8) segregation *****\n                       Before Matching       After Matching\nmean treatment........     45.162            45.162 \nmean control..........     56.059            48.835 \nstd mean diff.........    -60.758           -20.479 \n\nmean raw eQQ diff.....     10.918            4.6257 \nmed  raw eQQ diff.....     10.675            4.5646 \nmax  raw eQQ diff.....     17.966            9.7518 \n\nmean eCDF diff........    0.18644          0.078972 \nmed  eCDF diff........    0.20721          0.066924 \nmax  eCDF diff........    0.33076            0.1982 \n\nvar ratio (Tr/Co).....     1.5551            1.2339 \nT-test p-value........ &lt; 2.22e-16        2.1495e-06 \nKS Bootstrap p-value.. &lt; 2.22e-16        &lt; 2.22e-16 \nKS Naive p-value...... &lt; 2.22e-16        1.1099e-13 \nKS Statistic..........    0.33076            0.1982 \n\n\n***** (V9) below_18 *****\n                       Before Matching       After Matching\nmean treatment........    0.21521           0.21521 \nmean control..........    0.21435           0.21543 \nstd mean diff.........     2.3763           -0.6046 \n\nmean raw eQQ diff.....  0.0033666         0.0038355 \nmed  raw eQQ diff.....  0.0025852         0.0029644 \nmax  raw eQQ diff.....   0.071666          0.099059 \n\nmean eCDF diff........   0.023328          0.025996 \nmed  eCDF diff........   0.023166          0.027027 \nmax  eCDF diff........   0.050193          0.068211 \n\nvar ratio (Tr/Co).....     1.0897           0.96816 \nT-test p-value........    0.63248           0.90575 \nKS Bootstrap p-value..       0.29             0.046 \nKS Naive p-value......    0.28165          0.053823 \nKS Statistic..........   0.050193          0.068211 \n\n\n***** (V10) above_65 *****\n                       Before Matching       After Matching\nmean treatment........    0.21521           0.21521 \nmean control..........    0.19577            0.2255 \nstd mean diff.........     39.892           -21.115 \n\nmean raw eQQ diff.....   0.019441          0.016389 \nmed  raw eQQ diff.....    0.02113          0.010991 \nmax  raw eQQ diff.....   0.055136          0.060015 \n\nmean eCDF diff........    0.13214          0.066599 \nmed  eCDF diff........    0.13385          0.061776 \nmax  eCDF diff........    0.24453           0.16216 \n\nvar ratio (Tr/Co).....    0.95543           0.58912 \nT-test p-value........ 1.3767e-14         0.0002428 \nKS Bootstrap p-value.. &lt; 2.22e-16        &lt; 2.22e-16 \nKS Naive p-value...... &lt; 2.22e-16        2.6751e-09 \nKS Statistic..........    0.24453           0.16216 \n\n\n***** (V11) ps1 *****\n                       Before Matching       After Matching\nmean treatment........    0.68035           0.68035 \nmean control..........    0.31965           0.68039 \nstd mean diff.........     155.79          -0.01788 \n\nmean raw eQQ diff.....    0.36069         0.0014057 \nmed  raw eQQ diff.....    0.40833        0.00093887 \nmax  raw eQQ diff.....    0.48292         0.0093827 \n\nmean eCDF diff........    0.34969         0.0025874 \nmed  eCDF diff........    0.38867          0.001287 \nmax  eCDF diff........    0.56113          0.019305 \n\nvar ratio (Tr/Co).....    0.93354           0.99996 \nT-test p-value........ &lt; 2.22e-16           0.56947 \nKS Bootstrap p-value.. &lt; 2.22e-16                 1 \nKS Naive p-value...... &lt; 2.22e-16           0.99869 \nKS Statistic..........    0.56113          0.019305 \n\n\n***** (V12) linps1 *****\n                       Before Matching       After Matching\nmean treatment........     1.0321            1.0321 \nmean control..........   -0.98732            1.0249 \nstd mean diff.........     140.76           0.50261 \n\nmean raw eQQ diff.....     2.0194          0.021934 \nmed  raw eQQ diff.....     2.0486         0.0054214 \nmax  raw eQQ diff.....     2.7235            1.7689 \n\nmean eCDF diff........    0.34969         0.0025874 \nmed  eCDF diff........    0.38867          0.001287 \nmax  eCDF diff........    0.56113          0.019305 \n\nvar ratio (Tr/Co).....    0.98184            1.0325 \nT-test p-value........ &lt; 2.22e-16          0.035311 \nKS Bootstrap p-value.. &lt; 2.22e-16                 1 \nKS Naive p-value...... &lt; 2.22e-16           0.99869 \nKS Statistic..........    0.56113          0.019305 \n\n\nBefore Matching Minimum p.value: &lt; 2.22e-16 \nVariable Name(s): poor_mental social_score diabetes insuff_sleep highschool_grad segregation above_65 ps1 linps1  Number(s): 1 4 5 6 7 8 10 11 12 \n\nAfter Matching Minimum p.value: &lt; 2.22e-16 \nVariable Name(s): insuff_sleep highschool_grad segregation above_65  Number(s): 6 7 8 10 \n\n\n\n\n11.3.2 Tabulating Standardized Differences\nWe will name the covariates used in our model.\n\n\nCode\ncovnames &lt;- c( \"poor_mental\", \"unemployment\", \"income_inequality\", \"social_score\", \n                  \"diabetes\", \"insuff_sleep\", \"highschool_grad\", \"segregation\",\n                  \"below_18\", \"above_65\", \"raw PS\", \"linear PS\") \n\n\nThen we will extract the standardized differences.\n\n\nCode\npre.szd &lt;- NULL; post.szd &lt;- NULL\nfor(i in 1:length(covnames)) {\n  pre.szd[i] &lt;- mb1$BeforeMatching[[i]]$sdiff.pooled\n  post.szd[i] &lt;- mb1$AfterMatching[[i]]$sdiff.pooled\n}\n\n\nNow, we can have our final table.\n\n\nCode\nmatch_szd &lt;- tibble(covnames, pre.szd, post.szd, row.names=covnames)\nmatch_szd\n\n\n# A tibble: 12 × 4\n   covnames          pre.szd post.szd row.names        \n   &lt;chr&gt;               &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;            \n 1 poor_mental         54.7    8.63   poor_mental      \n 2 unemployment         7.29   0.779  unemployment     \n 3 income_inequality    8.73  -0.755  income_inequality\n 4 social_score        -1.95  -5.87   social_score     \n 5 diabetes            78.8    4.58   diabetes         \n 6 insuff_sleep        70.3   -3.62   insuff_sleep     \n 7 highschool_grad     36.8    7.35   highschool_grad  \n 8 segregation        -67.0  -20.5    segregation      \n 9 below_18             2.43  -0.605  below_18         \n10 above_65            39.4  -21.1    above_65         \n11 raw PS             153.    -0.0179 raw PS           \n12 linear PS          140.     0.503  linear PS        \n\n\nWe will use these results to build the love plot to better visualize the standardized differences.\n\n\n11.3.3 Visualizing Standardized Differences\nWe will use the cobalt method to build plots for the standardized differences and the variance ratios.\n\n\nCode\nb &lt;- bal.tab(match1, \n             dentist_n ~ poor_mental + unemployment  + income_inequality + social_score + \n                  diabetes  + insuff_sleep + highschool_grad + segregation +\n                  below_18 + above_65 + ps1 + linps1, \n             data= chr_fin2, stats = c(\"m\", \"v\"), un = TRUE,\n             quick = FALSE)\nb\n\n\nBalance Measures\n                     Type Diff.Un V.Ratio.Un Diff.Adj V.Ratio.Adj\npoor_mental       Contin.  0.5262     1.1800   0.0863      1.0184\nunemployment      Contin.  0.0715     1.0862   0.0078      1.0711\nincome_inequality Contin.  0.0780     1.6836  -0.0075      1.5929\nsocial_score      Contin. -0.0168     2.0485  -0.0587      1.2064\ndiabetes          Contin.  0.7114     1.5867   0.0458      1.0249\ninsuff_sleep      Contin.  0.6869     1.1012  -0.0362      0.7283\nhighschool_grad   Contin.  0.3478     1.2754   0.0735      1.4175\nsegregation       Contin. -0.6076     1.5551  -0.2048      1.2258\nbelow_18          Contin.  0.0238     1.0897  -0.0060      0.9618\nabove_65          Contin.  0.3989     0.9554  -0.2111      0.5852\nps1               Contin.  1.5579     0.9335  -0.0002      0.9934\nlinps1            Contin.  1.4076     0.9818   0.0050      1.0257\n\nSample sizes\n                     Control Treated\nAll                   777.       777\nMatched (ESS)         127.23     777\nMatched (Unweighted)  278.       777\nUnmatched             499.         0\n\n\n\nAs previously mentioned, the effective size after 1:1 matching with replacement is 278 counties. We lost 499 counties from the sample because they were unmatched.\n\nNow we will build the love plot for the standardized differences:\n\n\nCode\nlplot1 &lt;- love.plot(b, threshold = .1, size = 3,\n               var.order = \"unadjusted\", stars = \"raw\",\n               title = \"Standardized Differences and 1:1 Matching with Replacement\")\nlplot1\n\n\n\n\n\n\n\n\n\n\nAll covariates have improved standardized difference after 1:1 matching adjustment, with the exception for social_score.\n\nPlot of Variance Ratios\n\n\nCode\nlplot2 &lt;- love.plot(b, stat = \"v\",\n               threshold = 1.25, size = 3,\n               var.order = \"unadjusted\",\n               title = \"Variance Ratios and 1:1 Matching with Replacement\")\nlplot2 + theme_bw()\n\n\n\n\n\n\n\n\n\nMost of the covariates displayed improved variance ratios with the exception of income_inequality, highschool_grad, insuff_sleep, and above_65.\n\n\n11.3.4 Building New Data Frame with Matched Sample\n\n\nCode\nmatches1 &lt;- factor(rep(match1$index.treated, 2))\nchr.matchedsample1 &lt;- cbind(matches1, chr_fin2[c(match1$index.control, match1$index.treated),])\n\n\n\n\nCode\nchr.matchedsample1 |&gt; count(dentist_grp)\n\n\n  dentist_grp   n\n1        High 777\n2         Low 777\n\n\nBecause the 1:1 matching method we used includes replacement, it is only natural to retain the original number of observations in the exposure groups.\n\n\n11.3.5 Rubin’s Rules After Matching\nFirst, we will check Rubin’s Rule 1:\n\n\nCode\nrubin1.match1 &lt;- with(chr.matchedsample1,\n      abs(100*(mean(linps1[dentist_n==1])-mean(linps1[dentist_n==0]))/sd(linps1)))\nrubin1.match1\n\n\n[1] 0.5067778\n\n\n\nThe absolute value of the standardized difference of the linear propensity score before adjustment was 114.8%. The value after adjustment (52.76%) shows substantial improvement as it is close to the maximum value of 50%, but the value remains above 10% and is not close to 0%. In this case, we barely pass Rubin’s Rule 1.\n\nNext, we will check Rubin’s Rule 2:\n\n\nCode\nrubin2.match1 &lt;- with(chr.matchedsample1, var(linps1[dentist_n==1])/var(linps1[dentist_n==0]))\nrubin2.match1\n\n\n[1] 1.032521\n\n\n\nThe previous ratio of the variance of the linear propensity score was 0.98. This value also shows mild improvement where the value is closer to 1 and remains below 2. We also pass Rubin’s Rule 2 and can proceed to use the results of this PS adjustment to measure the estimates.\n\n\n\n11.3.6 Estimating Effect of Exposure on Outcome After 1:1 Matching\nWe will use the ATT (Average Treatment Effect on the Treated) estimate to measure the dentist proportion effect on smoking prevalence in US Counties. First, we will need to create a data frame out of the matched sample:\n\n\nCode\nmatches1 &lt;- factor(rep(match1$index.treated, 2))\nchr.matchedsamplef &lt;- cbind(matches1, chr_fin2[c(match1$index.control, match1$index.treated),])\n\n\nNow, we can produce an estimate using the matched sample from chr_fin2.\n\n\nCode\nchr.matchedsamplef$matches.f &lt;- as.factor(chr.matchedsamplef$matches1)\n\nmatched_mix.mod1 &lt;- lmer(smoking_prop ~ dentist_n + (1 | matches.f), REML = TRUE, data=chr.matchedsamplef)\n\ntidy_matched_mix.mod1 &lt;- broom.mixed::tidy(matched_mix.mod1, conf.int = TRUE, conf.level = 0.95) |&gt; \n  filter(term == \"dentist_n\")\n\ntidy_matched_mix.mod1 |&gt; kable(digits = 3)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\neffect\ngroup\nterm\nestimate\nstd.error\nstatistic\nconf.low\nconf.high\n\n\n\n\nfixed\nNA\ndentist_n\n0.776\n0.195\n3.985\n0.394\n1.158\n\n\n\n\n\n\nAfter 1:1 matching with replacement, our model estimates the effect of low dentists proportions on smoking prevalence in US counties to increase by 0.78 percentage points (95% CI: 0.39, 1.16). Our confidence interval does not include 0, therefore, following up with a sensitivity analysis is a reasonable choice.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#use-att-weighting-adjustment",
    "href": "project_06.html#use-att-weighting-adjustment",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "11.4 Use ATT Weighting Adjustment",
    "text": "11.4 Use ATT Weighting Adjustment\nWe will start by creating a data frame of our data set.\n\n\nCode\nchrfin_df &lt;- base::data.frame(chr_fin2)\n\n\nNow, we will calculate the propensity score using the ps function from the twang package.\n\n\nCode\nps.chr &lt;- twang::ps(dentist_n ~ poor_mental + unemployment  + income_inequality + social_score + \n                  diabetes  + insuff_sleep + highschool_grad + segregation +\n                  below_18 + above_65 + ps1 + linps1,\n             data = chrfin_df,\n             n.trees = 5000,\n             interaction.depth = 2,\n             stop.method = c(\"es.mean\"),\n             estimand = \"ATT\",\n             verbose = FALSE)\n\n\nChecking the iteration:\n\n\nCode\nplot(ps.chr)\n\n\n\n\n\n\n\n\n\n\nWe can see that we have run enough iterations to reach a stable estimate.\n\nObserving the effective sample size of the weighted estimates:\n\n\nCode\nsummary(ps.chr)\n\n\n            n.treat n.ctrl ess.treat ess.ctrl    max.es   mean.es    max.ks\nunw             777    777       777 777.0000 1.5578591 0.5361848 0.5611326\nes.mean.ATT     777    777       777 163.8941 0.1794596 0.0667433 0.1205385\n            max.ks.p    mean.ks iter\nunw               NA 0.26490776   NA\nes.mean.ATT       NA 0.07668971 1111\n\n\n\nThe effective size after ATT weighting is 163 counties.\n\n\n11.4.1 Checking the balance\n\n\nCode\nplot(ps.chr, plots = 2)\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot(ps.chr, plots = 3)\n\n\n\n\n\n\n\n\n\n\nWe can see that the weighted estimates have an absolute standard differences are below 0.5 and are closer to 0 compared to the unadjusted estimates.\n\nWe can also assess the balance using the cobalt method.\n\n\nCode\nb2 &lt;- cobalt::bal.tab(ps.chr, full.stop.method = \"es.mean.att\", \n        stats = c(\"m\", \"v\"), un = TRUE)\n\nb2\n\n\nBalance Measures\n                      Type Diff.Un V.Ratio.Un Diff.Adj V.Ratio.Adj\nprop.score        Distance  2.2674     0.7698   0.5561      0.6932\npoor_mental        Contin.  0.5262     1.1800   0.0079      0.9499\nunemployment       Contin.  0.0715     1.0862   0.0512      1.1563\nincome_inequality  Contin.  0.0780     1.6836   0.0068      1.3792\nsocial_score       Contin. -0.0168     2.0485   0.0007      1.0241\ndiabetes           Contin.  0.7114     1.5867   0.1795      1.4289\ninsuff_sleep       Contin.  0.6869     1.1012   0.0630      0.9451\nhighschool_grad    Contin.  0.3478     1.2754  -0.0281      1.3991\nsegregation        Contin. -0.6076     1.5551  -0.0901      0.9325\nbelow_18           Contin.  0.0238     1.0897  -0.0110      1.0725\nabove_65           Contin.  0.3989     0.9554  -0.0601      0.8466\nps1                Contin.  1.5579     0.9335   0.1684      0.8879\nlinps1             Contin.  1.4076     0.9818   0.1342      0.8905\n\nEffective sample sizes\n           Control Treated\nUnadjusted  777.       777\nAdjusted    163.89     777\n\n\nWe will visualize the standardized differences using the Love plot.\n\n\nCode\nlplot3 &lt;- cobalt::love.plot(b2, \n               threshold = .1, size = 3, stars = \"raw\",\n               title = \"Standardized Diffs and TWANG ATT weighting\")\nlplot3\n\n\n\n\n\n\n\n\n\n\nAll of the variables have observable improved standardized difference after TWANG ATT weighting adjustment.\n\nVisualizing the variance ratio:\n\n\nCode\nlplot4 &lt;- cobalt::love.plot(b2, stat = \"v\",\n               threshold = 1.25, size = 3, \n               title = \"Variance Ratios: TWANG ATT weighting\")\nlplot4 + theme_bw()\n\n\n\n\n\n\n\n\n\nMost of the variables show some improvement in the variance ration after adjustment, though it is not very satisfying.\n\n\n11.4.2 Estimating The Causal Effect After ATT Weight Adjustment\nFirst, we will build the weight reference wts1 (which is the inverse propensity score) and add it to our data set chr_out1.\n\n\nCode\nchr_fin2$wts1 &lt;- ifelse(chr_fin2$dentist_n==1, 1, chr_fin2$ps1/(1-chr_fin2$ps1))\n\n\n\n\nCode\nchrwt1.design &lt;- survey::svydesign(ids=~1, weights=~wts1, data= chr_fin2) \n\nadjout1.wt1 &lt;- survey::svyglm(smoking_prop ~ dentist_n, design= chrwt1.design)\n\nwt_att_results1 &lt;- tidy(adjout1.wt1, conf.int = TRUE) |&gt; filter(term == \"dentist_n\")\n\nwt_att_results1\n\n\n# A tibble: 1 × 7\n  term      estimate std.error statistic p.value conf.low conf.high\n  &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 dentist_n   -0.434      1.09    -0.398   0.691    -2.57      1.71\n\n\n\nAfter ATT weight adjustment, the estimated impact of low dentist proportions on smoking prevalence in US counties is decrease of -0.43 percentage points (95% CI: -2.57, 1.71).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#use-double-robust-adjustment",
    "href": "project_06.html#use-double-robust-adjustment",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "11.5 Use Double Robust Adjustment",
    "text": "11.5 Use Double Robust Adjustment\n\n\nCode\nchr.dr.design &lt;- survey::svydesign(ids=~1, weights=~wts1, data= chr_fin2) \n\ndr.out1.wt1 &lt;- survey::svyglm(smoking_prop ~ dentist_n + linps1, design= chr.dr.design)\n\ndr_att_out1 &lt;- tidy(dr.out1.wt1, conf.int = TRUE) |&gt; filter(term == \"dentist_n\")\n\ndr_att_out1\n\n\n# A tibble: 1 × 7\n  term      estimate std.error statistic p.value conf.low conf.high\n  &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 dentist_n    0.723     0.453      1.60   0.111   -0.166      1.61\n\n\n\nAfter Double Robust adjustment, the estimated impact of low dentist proportions on smoking prevalence in US counties is an increase of 0.72 percentage points (95% CI: -0.17, 1.61). These results are slightly different from the ATT Weighting results.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#compare-results",
    "href": "project_06.html#compare-results",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "11.6 Compare Results",
    "text": "11.6 Compare Results\n\n\nCode\nchr_results &lt;- tibble(\n    analysis = c(\"Unadjusted\", \"PS 1:1 Match\", \"TWANG ATT WT\", \"Double Robust\"),\n    estimate = c(2.36, 0.78, -0.43, 0.72),\n    conf.low = c(1.99, 0.39, -2.57, -0.17),\n    conf.high = c(2.73, 1.16, 1.71, 1.61))\n\nggplot(chr_results, aes(x = analysis, y = estimate)) +\n    geom_errorbar(aes(ymax = conf.high, ymin = conf.low), width = 0.5) + \n    geom_label(aes(label = estimate), size = 5)\n\n\n\n\n\n\n\n\n\n\nWe can see that propensity score adjustment decreased the estimated affect of dentist proportions on smoking prevalence in US counties (from 2.36% to about 0.7-0.8%) . While two of the three adjustments present close estimates, the 1:1 matching with replacement adjustment displays the smallest confidence interval, the best balance, and largest effective size (278 after 1:1 matching compared to 163 after ATT weighting).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#sensitivity-analysis",
    "href": "project_06.html#sensitivity-analysis",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "11.7 Sensitivity Analysis",
    "text": "11.7 Sensitivity Analysis\nThe estimate produced from the 1:1 Matching with replacement has a statistically significant p-value. Therefore, we will need to perform a sensitivity analysis.\n\n\nCode\nRc &lt;- match1$mdata$Y[match1$mdata$Tr==0]\nRt &lt;- match1$mdata$Y[match1$mdata$Tr==1] \n\n\npsens(Rt, Rc, Gamma = 5, GammaInc = 0.25)\n\n\n\n Rosenbaum Sensitivity Test for Wilcoxon Signed Rank P-Value \n \nUnconfounded estimate ....  NaN \n\n Gamma Lower bound Upper bound\n  1.00         NaN         NaN\n  1.25         NaN         NaN\n  1.50         NaN         NaN\n  1.75         NaN         NaN\n  2.00         NaN         NaN\n  2.25         NaN         NaN\n  2.50         NaN         NaN\n  2.75         NaN         NaN\n  3.00         NaN         NaN\n  3.25         NaN         NaN\n  3.50         NaN         NaN\n  3.75         NaN         NaN\n  4.00         NaN         NaN\n  4.25         NaN         NaN\n  4.50         NaN         NaN\n  4.75         NaN         NaN\n  5.00         NaN         NaN\n\n Note: Gamma is Odds of Differential Assignment To\n Treatment Due to Unobserved Factors \n \n\n\nOur conclusions regarding the impact of low dentists proportions increasing smoking prevalence in US counties hold true in absence of biases in the study. This conclusion is maintained in the presence of a biases level between L= 1.00 and L= 1.25. This means that only small hidden bias is needed to change our conclusions.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#unadjusted-outcome-2-drinking_prop",
    "href": "project_06.html#unadjusted-outcome-2-drinking_prop",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "12.1 Unadjusted Outcome 2 drinking_prop",
    "text": "12.1 Unadjusted Outcome 2 drinking_prop\nWe will observe the the distribution of the outcome drinking_prop among the two exposure groups dentist_grp.\n\n\nCode\ndf_stats(drinking_prop ~ dentist_grp, data = chr_fin2) |&gt;\n  gt() |&gt; fmt_number(mean:sd, decimals = 2) |&gt;\n  opt_stylize(style = 5, color = \"pink\")\n\n\n\n\n\n\n\n\nresponse\ndentist_grp\nmin\nQ1\nmedian\nQ3\nmax\nmean\nsd\nn\nmissing\n\n\n\n\ndrinking_prop\nHigh\n10.140012\n16.79649\n18.88142\n20.74658\n29.44012\n18.83\n3.24\n777\n0\n\n\ndrinking_prop\nLow\n9.265156\n14.09065\n16.03230\n18.32060\n27.81331\n16.26\n2.91\n777\n0\n\n\n\n\n\n\n\nThe low dentist group has a lower mean of excessive drinking prevalence (16.3 vs 18.8).\n\n12.1.1 Linear Regression Model for Outcome 2\nWe will build a linear regression model for outcome 2 drinking_prop and the exposure dentist_grp without including the covariates.\n\n\nCode\nunadj.out2 &lt;- lm(drinking_prop ~ dentist_grp, data= chr_fin2)\n\nmodel_parameters(unadj.out2, ci = 0.95) |&gt; \n  gt() |&gt; fmt_number(columns = -df_error, decimals = 3) |&gt;\n  opt_stylize(style = 6, color = \"pink\")\n\n\n\n\n\n\n\n\nParameter\nCoefficient\nSE\nCI\nCI_low\nCI_high\nt\ndf_error\np\n\n\n\n\n(Intercept)\n18.825\n0.110\n0.950\n18.609\n19.042\n170.493\n1552\n0.000\n\n\ndentist_grpLow\n−2.563\n0.156\n0.950\n−2.869\n−2.256\n−16.412\n1552\n0.000\n\n\n\n\n\n\n\n\nThe unadjusted model estimates that low dentist proportions decreases excessive drinking prevalence in US counties by 2.56 percentage points (95% CI: -2.87, -2.26).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#matching-with-replacement-1",
    "href": "project_06.html#matching-with-replacement-1",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "12.2 1:1 Matching With Replacement",
    "text": "12.2 1:1 Matching With Replacement\nThe binary exposure has an equal number of observations in each group (n=777). Therefore, we will use 1:1 matching with replacement.\n\n\nCode\nX &lt;- chr_fin2$linps1 \nTr &lt;- as.logical(chr_fin2$dentist_n)\nmatch2 &lt;- Match(Tr=Tr, X=X, M = 1, replace = TRUE, ties=FALSE)\nsummary(match2)\n\n\n\nEstimate...  0 \nSE.........  0 \nT-stat.....  NaN \np.val......  NA \n\nOriginal number of observations..............  1554 \nOriginal number of treated obs...............  777 \nMatched number of observations...............  777 \nMatched number of observations  (unweighted).  777 \n\n\nchecking if matching worked:\n\n\nCode\nn_distinct(match2$index.treated)\n\n\n[1] 777\n\n\n\n\nCode\nn_distinct(match2$index.control)\n\n\n[1] 269\n\n\n\nAfter 1:1 matching with replacement, the effective size was reduced to 269 matched counties from the low dentist and high dentist groups.\n\n\n12.2.1 Balance Assessment\n\n\nCode\nset.seed(500)\nmb2 &lt;- MatchBalance(dentist_n ~ poor_mental + unemployment  + income_inequality + social_score + \n                  diabetes  + insuff_sleep + highschool_grad + segregation +\n                  below_18 + above_65 + ps1 + linps1, \n                  data= chr_fin2, \n                    match.out = match2, nboots=500)\n\n\n\n***** (V1) poor_mental *****\n                       Before Matching       After Matching\nmean treatment........      5.354             5.354 \nmean control..........     5.0152            5.3006 \nstd mean diff.........     52.617            8.2912 \n\nmean raw eQQ diff.....    0.34041          0.078434 \nmed  raw eQQ diff.....    0.36298          0.068421 \nmax  raw eQQ diff.....    0.73693           0.73693 \n\nmean eCDF diff........    0.16003          0.033382 \nmed  eCDF diff........    0.18919           0.02574 \nmax  eCDF diff........    0.24324           0.10296 \n\nvar ratio (Tr/Co).....       1.18            1.0018 \nT-test p-value........ &lt; 2.22e-16          0.081108 \nKS Bootstrap p-value.. &lt; 2.22e-16             0.002 \nKS Naive p-value...... &lt; 2.22e-16        0.00052946 \nKS Statistic..........    0.24324           0.10296 \n\n\n***** (V2) unemployment *****\n                       Before Matching       After Matching\nmean treatment........   0.035706          0.035706 \nmean control..........   0.034857          0.035517 \nstd mean diff.........     7.1471            1.5883 \n\nmean raw eQQ diff.....  0.0010747        0.00088258 \nmed  raw eQQ diff.....   0.001005        0.00061619 \nmax  raw eQQ diff.....   0.013165          0.018658 \n\nmean eCDF diff........   0.025066          0.017423 \nmed  eCDF diff........   0.020592           0.01287 \nmax  eCDF diff........   0.059202          0.055341 \n\nvar ratio (Tr/Co).....     1.0862            1.1023 \nT-test p-value........    0.15077            0.7428 \nKS Bootstrap p-value..      0.146             0.178 \nKS Naive p-value......    0.13128           0.18502 \nKS Statistic..........   0.059202          0.055341 \n\n\n***** (V3) income_inequality *****\n                       Before Matching       After Matching\nmean treatment........     4.6117            4.6117 \nmean control..........     4.5373            4.6387 \nstd mean diff.........     7.7974           -2.8275 \n\nmean raw eQQ diff.....    0.15959            0.1258 \nmed  raw eQQ diff.....    0.10178          0.079581 \nmax  raw eQQ diff.....     2.0677            2.5917 \n\nmean eCDF diff........   0.037661          0.027845 \nmed  eCDF diff........   0.041184          0.028314 \nmax  eCDF diff........   0.073359          0.065637 \n\nvar ratio (Tr/Co).....     1.6836            1.5003 \nT-test p-value........   0.085366           0.53569 \nKS Bootstrap p-value..      0.032             0.078 \nKS Naive p-value......   0.030552          0.070342 \nKS Statistic..........   0.073359          0.065637 \n\n\n***** (V4) social_score *****\n                       Before Matching       After Matching\nmean treatment........     10.845            10.845 \nmean control..........     10.969            11.301 \nstd mean diff.........    -1.6808           -6.1888 \n\nmean raw eQQ diff.....     1.7301           0.94784 \nmed  raw eQQ diff.....     1.2191            0.9656 \nmax  raw eQQ diff.....     21.371            21.456 \n\nmean eCDF diff........   0.059115          0.049636 \nmed  eCDF diff........   0.052767          0.056628 \nmax  eCDF diff........    0.12999          0.099099 \n\nvar ratio (Tr/Co).....     2.0485            1.2142 \nT-test p-value........    0.70099           0.19129 \nKS Bootstrap p-value.. &lt; 2.22e-16             0.002 \nKS Naive p-value...... 3.9747e-06        0.00097071 \nKS Statistic..........    0.12999          0.099099 \n\n\n***** (V5) diabetes *****\n                       Before Matching       After Matching\nmean treatment........    0.11284           0.11284 \nmean control..........   0.095932           0.11228 \nstd mean diff.........     71.142            2.3342 \n\nmean raw eQQ diff.....   0.016906         0.0017748 \nmed  raw eQQ diff.....      0.018             0.001 \nmax  raw eQQ diff.....      0.033             0.045 \n\nmean eCDF diff........    0.13194          0.013378 \nmed  eCDF diff........   0.099743          0.010296 \nmax  eCDF diff........    0.34234          0.048906 \n\nvar ratio (Tr/Co).....     1.5867            1.0398 \nT-test p-value........ &lt; 2.22e-16           0.57795 \nKS Bootstrap p-value.. &lt; 2.22e-16             0.238 \nKS Naive p-value...... &lt; 2.22e-16           0.31067 \nKS Statistic..........    0.34234          0.048906 \n\n\n***** (V6) insuff_sleep *****\n                       Before Matching       After Matching\nmean treatment........    0.35465           0.35465 \nmean control..........    0.32925            0.3563 \nstd mean diff.........     68.689           -4.4658 \n\nmean raw eQQ diff.....     0.0254          0.007618 \nmed  raw eQQ diff.....      0.027             0.006 \nmax  raw eQQ diff.....      0.032             0.028 \n\nmean eCDF diff........    0.13895          0.041729 \nmed  eCDF diff........    0.11583          0.041184 \nmax  eCDF diff........     0.3166           0.10682 \n\nvar ratio (Tr/Co).....     1.1012           0.75614 \nT-test p-value........ &lt; 2.22e-16           0.36823 \nKS Bootstrap p-value.. &lt; 2.22e-16        &lt; 2.22e-16 \nKS Naive p-value...... &lt; 2.22e-16        0.00028217 \nKS Statistic..........     0.3166           0.10682 \n\n\n***** (V7) highschool_grad *****\n                       Before Matching       After Matching\nmean treatment........    0.89305           0.89305 \nmean control..........    0.86432           0.88934 \nstd mean diff.........      34.78               4.5 \n\nmean raw eQQ diff.....   0.033037          0.012938 \nmed  raw eQQ diff.....   0.029953         0.0084777 \nmax  raw eQQ diff.....    0.37636           0.46344 \n\nmean eCDF diff........    0.15082          0.041283 \nmed  eCDF diff........    0.16345          0.041184 \nmax  eCDF diff........    0.26641           0.11583 \n\nvar ratio (Tr/Co).....     1.2754            1.7386 \nT-test p-value........ 6.2084e-13           0.31027 \nKS Bootstrap p-value.. &lt; 2.22e-16        &lt; 2.22e-16 \nKS Naive p-value...... &lt; 2.22e-16        5.9379e-05 \nKS Statistic..........    0.26641           0.11583 \n\n\n***** (V8) segregation *****\n                       Before Matching       After Matching\nmean treatment........     45.162            45.162 \nmean control..........     56.059            48.876 \nstd mean diff.........    -60.758           -20.706 \n\nmean raw eQQ diff.....     10.918            4.6238 \nmed  raw eQQ diff.....     10.675            4.5646 \nmax  raw eQQ diff.....     17.966            9.8243 \n\nmean eCDF diff........    0.18644          0.079899 \nmed  eCDF diff........    0.20721          0.070785 \nmax  eCDF diff........    0.33076           0.20463 \n\nvar ratio (Tr/Co).....     1.5551            1.2463 \nT-test p-value........ &lt; 2.22e-16        1.7141e-06 \nKS Bootstrap p-value.. &lt; 2.22e-16        &lt; 2.22e-16 \nKS Naive p-value...... &lt; 2.22e-16        1.4809e-14 \nKS Statistic..........    0.33076           0.20463 \n\n\n***** (V9) below_18 *****\n                       Before Matching       After Matching\nmean treatment........    0.21521           0.21521 \nmean control..........    0.21435           0.21636 \nstd mean diff.........     2.3763           -3.1678 \n\nmean raw eQQ diff.....  0.0033666         0.0038545 \nmed  raw eQQ diff.....  0.0025852         0.0031975 \nmax  raw eQQ diff.....   0.071666          0.099059 \n\nmean eCDF diff........   0.023328          0.028745 \nmed  eCDF diff........   0.023166          0.027027 \nmax  eCDF diff........   0.050193           0.07722 \n\nvar ratio (Tr/Co).....     1.0897           0.97856 \nT-test p-value........    0.63248           0.53529 \nKS Bootstrap p-value..       0.29              0.01 \nKS Naive p-value......    0.28165          0.019447 \nKS Statistic..........   0.050193           0.07722 \n\n\n***** (V10) above_65 *****\n                       Before Matching       After Matching\nmean treatment........    0.21521           0.21521 \nmean control..........    0.19577           0.22345 \nstd mean diff.........     39.892           -16.919 \n\nmean raw eQQ diff.....   0.019441          0.015299 \nmed  raw eQQ diff.....    0.02113         0.0090949 \nmax  raw eQQ diff.....   0.055136          0.057585 \n\nmean eCDF diff........    0.13214          0.062442 \nmed  eCDF diff........    0.13385          0.065637 \nmax  eCDF diff........    0.24453           0.15315 \n\nvar ratio (Tr/Co).....    0.95543           0.59933 \nT-test p-value........ 1.3767e-14         0.0032109 \nKS Bootstrap p-value.. &lt; 2.22e-16        &lt; 2.22e-16 \nKS Naive p-value...... &lt; 2.22e-16        2.4317e-08 \nKS Statistic..........    0.24453           0.15315 \n\n\n***** (V11) ps1 *****\n                       Before Matching       After Matching\nmean treatment........    0.68035           0.68035 \nmean control..........    0.31965           0.68035 \nstd mean diff.........     155.79        -0.0011278 \n\nmean raw eQQ diff.....    0.36069         0.0014012 \nmed  raw eQQ diff.....    0.40833        0.00091168 \nmax  raw eQQ diff.....    0.48292         0.0093827 \n\nmean eCDF diff........    0.34969         0.0026134 \nmed  eCDF diff........    0.38867          0.001287 \nmax  eCDF diff........    0.56113          0.019305 \n\nvar ratio (Tr/Co).....    0.93354           0.99994 \nT-test p-value........ &lt; 2.22e-16           0.97131 \nKS Bootstrap p-value.. &lt; 2.22e-16                 1 \nKS Naive p-value...... &lt; 2.22e-16           0.99869 \nKS Statistic..........    0.56113          0.019305 \n\n\n***** (V12) linps1 *****\n                       Before Matching       After Matching\nmean treatment........     1.0321            1.0321 \nmean control..........   -0.98732            1.0247 \nstd mean diff.........     140.76            0.5161 \n\nmean raw eQQ diff.....     2.0194          0.021914 \nmed  raw eQQ diff.....     2.0486         0.0054645 \nmax  raw eQQ diff.....     2.7235            1.7689 \n\nmean eCDF diff........    0.34969         0.0026134 \nmed  eCDF diff........    0.38867          0.001287 \nmax  eCDF diff........    0.56113          0.019305 \n\nvar ratio (Tr/Co).....    0.98184            1.0326 \nT-test p-value........ &lt; 2.22e-16          0.030659 \nKS Bootstrap p-value.. &lt; 2.22e-16                 1 \nKS Naive p-value...... &lt; 2.22e-16           0.99869 \nKS Statistic..........    0.56113          0.019305 \n\n\nBefore Matching Minimum p.value: &lt; 2.22e-16 \nVariable Name(s): poor_mental social_score diabetes insuff_sleep highschool_grad segregation above_65 ps1 linps1  Number(s): 1 4 5 6 7 8 10 11 12 \n\nAfter Matching Minimum p.value: &lt; 2.22e-16 \nVariable Name(s): insuff_sleep highschool_grad segregation above_65  Number(s): 6 7 8 10 \n\n\n\n\n12.2.2 Tabulating Standardized Differences\nWe will name the covariates used in our model.\n\n\nCode\ncovnames2 &lt;- c( \"poor_mental\", \"unemployment\", \"income_inequality\", \"social_score\", \n                  \"diabetes\", \"insuff_sleep\", \"highschool_grad\", \"segregation\",\n                  \"below_18\", \"above_65\", \"raw PS\", \"linear PS\") \n\n\nThen we will extract the standardized differences.\n\n\nCode\npre.szd2 &lt;- NULL; post.szd2 &lt;- NULL\nfor(i in 1:length(covnames2)) {\n  pre.szd2[i] &lt;- mb2$BeforeMatching[[i]]$sdiff.pooled\n  post.szd2[i] &lt;- mb2$AfterMatching[[i]]$sdiff.pooled\n}\n\n\nNow, we can have our final table.\n\n\nCode\nmatch_szd2 &lt;- tibble(covnames2, pre.szd2, post.szd2, row.names=covnames2)\nmatch_szd2\n\n\n# A tibble: 12 × 4\n   covnames2         pre.szd2 post.szd2 row.names        \n   &lt;chr&gt;                &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;            \n 1 poor_mental          54.7    8.29    poor_mental      \n 2 unemployment          7.29   1.59    unemployment     \n 3 income_inequality     8.73  -2.83    income_inequality\n 4 social_score         -1.95  -6.19    social_score     \n 5 diabetes             78.8    2.33    diabetes         \n 6 insuff_sleep         70.3   -4.47    insuff_sleep     \n 7 highschool_grad      36.8    4.50    highschool_grad  \n 8 segregation         -67.0  -20.7     segregation      \n 9 below_18              2.43  -3.17    below_18         \n10 above_65             39.4  -16.9     above_65         \n11 raw PS              153.    -0.00113 raw PS           \n12 linear PS           140.     0.516   linear PS        \n\n\nWe will use these results to build the love plot to better visualize the standardized differences.\n\n\n12.2.3 Visualizing Standardized Differences\nWe will use the cobalt method to build plots for the standardized differences and the variance ratios.\n\n\nCode\nb2 &lt;- bal.tab(match2, \n             dentist_n ~ poor_mental + unemployment  + income_inequality + social_score + \n                  diabetes  + insuff_sleep + highschool_grad + segregation +\n                  below_18 + above_65 + ps1 + linps1, \n             data= chr_fin2, stats = c(\"m\", \"v\"), un = TRUE,\n             quick = FALSE)\nb2\n\n\nBalance Measures\n                     Type Diff.Un V.Ratio.Un Diff.Adj V.Ratio.Adj\npoor_mental       Contin.  0.5262     1.1800   0.0829      0.9952\nunemployment      Contin.  0.0715     1.0862   0.0159      1.0950\nincome_inequality Contin.  0.0780     1.6836  -0.0283      1.4904\nsocial_score      Contin. -0.0168     2.0485  -0.0619      1.2062\ndiabetes          Contin.  0.7114     1.5867   0.0233      1.0329\ninsuff_sleep      Contin.  0.6869     1.1012  -0.0447      0.7511\nhighschool_grad   Contin.  0.3478     1.2754   0.0450      1.7271\nsegregation       Contin. -0.6076     1.5551  -0.2071      1.2381\nbelow_18          Contin.  0.0238     1.0897  -0.0317      0.9721\nabove_65          Contin.  0.3989     0.9554  -0.1692      0.5954\nps1               Contin.  1.5579     0.9335  -0.0000      0.9933\nlinps1            Contin.  1.4076     0.9818   0.0052      1.0257\n\nSample sizes\n                     Control Treated\nAll                    777.      777\nMatched (ESS)          126.7     777\nMatched (Unweighted)   269.      777\nUnmatched              508.        0\n\n\n\nAs previously mentioned, the effective size after 1:1 matching with replacement is 269 counties. We lost 508 counties from the sample because they were unmatched.\n\nNow we will build the love plot for the standardized differences:\n\n\nCode\nlplot5 &lt;- love.plot(b2, threshold = .1, size = 3,\n               var.order = \"unadjusted\", stars = \"raw\",\n               title = \"Standardized Differences and 1:1 Matching with Replacement\")\nlplot5\n\n\n\n\n\n\n\n\n\n\nAll covariates have improved standardized difference after 1:1 matching adjustment, with the exception for social_score.\n\nPlot of Variance Ratios\n\n\nCode\nlplot6 &lt;- love.plot(b2, stat = \"v\",\n               threshold = 1.25, size = 3,\n               var.order = \"unadjusted\",\n               title = \"Variance Ratios and 1:1 Matching with Replacement\")\nlplot6 + theme_bw()\n\n\n\n\n\n\n\n\n\nMost of the covariates displayed improved variance ratios with the exception of highschool_grad, insuff_sleep, unemployment, and above_65.\n\n\n12.2.4 Building New Data Frame with Matched Sample\n\n\nCode\nmatches2 &lt;- factor(rep(match2$index.treated, 2))\nchr.matchedsample2 &lt;- cbind(matches2, chr_fin2[c(match2$index.control, match2$index.treated),])\n\n\n\n\nCode\nchr.matchedsample2 |&gt; count(dentist_grp)\n\n\n  dentist_grp   n\n1        High 777\n2         Low 777\n\n\nBecause the 1:1 matching method we used includes replacement, it is only natural to retain the original number of observations in the exposure groups.\n\n\n12.2.5 Rubin’s Rules After Matching\nFirst, we will check Rubin’s Rule 1:\n\n\nCode\nrubin1.match2 &lt;- with(chr.matchedsample2,\n      abs(100*(mean(linps1[dentist_n==1])-mean(linps1[dentist_n==0]))/sd(linps1)))\nrubin1.match2\n\n\n[1] 0.5203845\n\n\n\nThe absolute value of the standardized difference of the linear propensity score before adjustment was 114.8%. The value after adjustment (52.03%) shows substantial improvement, however the value is above 10% and far from to 0%. In this case, we barely pass Rubin’s Rule 1.\n\nNext, we will check Rubin’s Rule 2:\n\n\nCode\nrubin2.match2 &lt;- with(chr.matchedsample2, var(linps1[dentist_n==1])/var(linps1[dentist_n==0]))\nrubin2.match2\n\n\n[1] 1.032566\n\n\n\nThe previous ratio of the variance of the linear propensity score was 0.98. This value also shows mild improvement where the value is closer to 1 (1.03) and remains below 2. We also pass Rubin’s Rule 2 and can proceed to use the results of this PS adjustment to measure the estimates.\n\n\n\n12.2.6 Estimating Effect of Exposure on Outcome After 1:1 Matching\nWe will use the ATT (Average Treatment Effect on the Treated) estimate to measure the dentist proportion effect on smoking prevalence in US Counties. First, we will need to create a data frame out of the matched sample:\n\n\nCode\nmatches2 &lt;- factor(rep(match2$index.treated, 2))\nchr.matchedsamplef2 &lt;- cbind(matches2, chr_fin2[c(match2$index.control, match2$index.treated),])\n\n\nNow, we can produce an estimate using the matched sample from chr_fin2.\n\n\nCode\nchr.matchedsamplef2$matches2.f &lt;- as.factor(chr.matchedsamplef2$matches2)\n\nmatched_mix.mod2 &lt;- lmer(drinking_prop ~ dentist_n + (1 | matches2.f), REML = TRUE, data=chr.matchedsamplef2)\n\ntidy_matched_mix.mod2 &lt;- broom.mixed::tidy(matched_mix.mod2, conf.int = TRUE, conf.level = 0.95) |&gt; \n  filter(term == \"dentist_n\")\n\ntidy_matched_mix.mod2 |&gt; kable(digits = 3)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\neffect\ngroup\nterm\nestimate\nstd.error\nstatistic\nconf.low\nconf.high\n\n\n\n\nfixed\nNA\ndentist_n\n0.396\n0.122\n3.255\n0.158\n0.635\n\n\n\n\n\n\nAfter 1:1 matching with replacement, our model estimates the effect of low dentists proportions on excessive drinking prevalence in US counties to increase by 0.40 percentage points (95% CI: 0.16, 0.64). Our confidence interval does not include 0, therefore, following up with a sensitivity analysis is a reasonable choice.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#use-att-weighting-adjustment-1",
    "href": "project_06.html#use-att-weighting-adjustment-1",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "12.3 Use ATT Weighting Adjustment",
    "text": "12.3 Use ATT Weighting Adjustment\nWe will start by creating a data frame of our data set.\n\n\nCode\nchrfin_df2 &lt;- base::data.frame(chr_fin2)\n\n\nNow, we will calculate the propensity score using the ps function from the twang package.\n\n\nCode\nps.chr2 &lt;- twang::ps(dentist_n ~ poor_mental + unemployment  + income_inequality + social_score + \n                  diabetes  + insuff_sleep + highschool_grad + segregation +\n                  below_18 + above_65 + ps1 + linps1,\n             data = chrfin_df2,\n             n.trees = 5000,\n             interaction.depth = 2,\n             stop.method = c(\"es.mean\"),\n             estimand = \"ATT\",\n             verbose = FALSE)\n\n\nChecking the iteration:\n\n\nCode\nplot(ps.chr2)\n\n\n\n\n\n\n\n\n\n\nWe can see that we have run enough iterations to reach a stable estimate.\n\nObserving the effective sample size of the weighted estimates:\n\n\nCode\nsummary(ps.chr2)\n\n\n            n.treat n.ctrl ess.treat ess.ctrl    max.es   mean.es    max.ks\nunw             777    777       777 777.0000 1.5578591 0.5361848 0.5611326\nes.mean.ATT     777    777       777 163.8941 0.1794596 0.0667433 0.1205385\n            max.ks.p    mean.ks iter\nunw               NA 0.26490776   NA\nes.mean.ATT       NA 0.07668971 1111\n\n\n\nThe effective size after ATT weighting is 163 counties.\n\n\n12.3.1 Checking the balance\n\n\nCode\nplot(ps.chr2, plots = 2)\n\n\n\n\n\n\n\n\n\n\n\nCode\nplot(ps.chr2, plots = 3)\n\n\n\n\n\n\n\n\n\n\nWe can see that the weighted estimates have an absolute standard differences are below 0.5 and are closer to 0 compared to the unadjusted estimates.\n\nWe can also assess the balance using the cobalt method.\n\n\nCode\nb3 &lt;- cobalt::bal.tab(ps.chr2, full.stop.method = \"es.mean.att\", \n        stats = c(\"m\", \"v\"), un = TRUE)\n\nb3\n\n\nBalance Measures\n                      Type Diff.Un V.Ratio.Un Diff.Adj V.Ratio.Adj\nprop.score        Distance  2.2674     0.7698   0.5561      0.6932\npoor_mental        Contin.  0.5262     1.1800   0.0079      0.9499\nunemployment       Contin.  0.0715     1.0862   0.0512      1.1563\nincome_inequality  Contin.  0.0780     1.6836   0.0068      1.3792\nsocial_score       Contin. -0.0168     2.0485   0.0007      1.0241\ndiabetes           Contin.  0.7114     1.5867   0.1795      1.4289\ninsuff_sleep       Contin.  0.6869     1.1012   0.0630      0.9451\nhighschool_grad    Contin.  0.3478     1.2754  -0.0281      1.3991\nsegregation        Contin. -0.6076     1.5551  -0.0901      0.9325\nbelow_18           Contin.  0.0238     1.0897  -0.0110      1.0725\nabove_65           Contin.  0.3989     0.9554  -0.0601      0.8466\nps1                Contin.  1.5579     0.9335   0.1684      0.8879\nlinps1             Contin.  1.4076     0.9818   0.1342      0.8905\n\nEffective sample sizes\n           Control Treated\nUnadjusted  777.       777\nAdjusted    163.89     777\n\n\nWe will visualize the standardized differences using the Love plot.\n\n\nCode\nlplot7 &lt;- cobalt::love.plot(b3, \n               threshold = .1, size = 3, stars = \"raw\",\n               title = \"Standardized Diffs and TWANG ATT weighting\")\nlplot7\n\n\n\n\n\n\n\n\n\n\nAll of the variables have observable improved standardized difference after TWANG ATT weighting adjustment.\n\nVisualizing the variance ratio:\n\n\nCode\nlplot8 &lt;- cobalt::love.plot(b3, stat = \"v\",\n               threshold = 1.25, size = 3, \n               title = \"Variance Ratios: TWANG ATT weighting\")\nlplot8 + theme_bw()\n\n\n\n\n\n\n\n\n\nMost of the variables show some improvement in the variance ration after adjustment, though it is not very satisfying.\n\n\n12.3.2 Estimating The Causal Effect After ATT Weight Adjustment\nWe will use the weight design previously created wt1 and chrwt1.design.\n\n\nCode\nadjout2.wt1 &lt;- survey::svyglm(drinking_prop ~ dentist_n, design= chrwt1.design)\n\nwt_att_results2 &lt;- tidy(adjout2.wt1, conf.int = TRUE) |&gt; filter(term == \"dentist_n\")\n\nwt_att_results2\n\n\n# A tibble: 1 × 7\n  term      estimate std.error statistic p.value conf.low conf.high\n  &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 dentist_n     1.15     0.520      2.20  0.0276    0.126      2.17\n\n\n\nAfter ATT weight adjustment, the estimated impact of low dentist proportions on excessive drinking prevalence in US counties is an increase of 1.15 percentage points (95% CI: 0.13, 2.17).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#use-double-robust-adjustment-1",
    "href": "project_06.html#use-double-robust-adjustment-1",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "12.4 Use Double Robust Adjustment",
    "text": "12.4 Use Double Robust Adjustment\nWe will use the previous double robust design chr.dr.design.\n\n\nCode\ndr.out2.wt1 &lt;- survey::svyglm(drinking_prop ~ dentist_n + linps1, design= chr.dr.design)\n\ndr_att_out2 &lt;- tidy(dr.out2.wt1, conf.int = TRUE) |&gt; filter(term == \"dentist_n\")\n\ndr_att_out2\n\n\n# A tibble: 1 × 7\n  term      estimate std.error statistic p.value conf.low conf.high\n  &lt;chr&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n1 dentist_n   -0.106     0.222    -0.477   0.633   -0.542     0.330\n\n\n\nAfter Double Robust adjustment, the estimated impact of low dentist proportions on excessive drinking prevalence in US counties is a decrease of -0.11 percentage points (95% CI: -0.54, 0.33). These results are very different from the ATT Weighting results.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#compare-results-1",
    "href": "project_06.html#compare-results-1",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "12.5 Compare Results",
    "text": "12.5 Compare Results\n\n\nCode\nchr_results2 &lt;- tibble(\n    analysis = c(\"Unadjusted\", \"PS 1:1 Match\", \"TWANG ATT WT\", \"Double Robust\"),\n    estimate = c(-2.56, 0.40, 1.15, -0.11),\n    conf.low = c(-2.87, 0.16, 0.13, -0.54),\n    conf.high = c(-2.26, 0.64, 2.17, 0.33))\n\nggplot(chr_results2, aes(x = analysis, y = estimate)) +\n    geom_errorbar(aes(ymax = conf.high, ymin = conf.low), width = 0.5) + \n    geom_label(aes(label = estimate), size = 5)\n\n\n\n\n\n\n\n\n\n\nWe can see that propensity score adjustment inversed the estimated affect of dentist proportions on excessive drinking prevalence in US counties (from -2.56% to 0.4-1.2%) . While two of the three adjustments present close estimates, the 1:1 matching with replacement adjustment displays the smallest confidence interval, the best balance, and largest effective size (273 after 1:1 matching compared to 163 after ATT weighting).",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  },
  {
    "objectID": "project_06.html#sensitivity-analysis-1",
    "href": "project_06.html#sensitivity-analysis-1",
    "title": "6  Dentists, Adult Smoking, and Excessive Drinking",
    "section": "12.6 Sensitivity Analysis",
    "text": "12.6 Sensitivity Analysis\nThe estimate produced from the 1:1 Matching with replacement has a statistically significant p-value. Therefore, we will need to perform a sensitivity analysis.\n\n\nCode\nRc2 &lt;- match2$mdata$Y[match2$mdata$Tr==0]\nRt2 &lt;- match2$mdata$Y[match2$mdata$Tr==1] \n\n\npsens(Rt2, Rc2, Gamma = 5, GammaInc = 0.25)\n\n\n\n Rosenbaum Sensitivity Test for Wilcoxon Signed Rank P-Value \n \nUnconfounded estimate ....  NaN \n\n Gamma Lower bound Upper bound\n  1.00         NaN         NaN\n  1.25         NaN         NaN\n  1.50         NaN         NaN\n  1.75         NaN         NaN\n  2.00         NaN         NaN\n  2.25         NaN         NaN\n  2.50         NaN         NaN\n  2.75         NaN         NaN\n  3.00         NaN         NaN\n  3.25         NaN         NaN\n  3.50         NaN         NaN\n  3.75         NaN         NaN\n  4.00         NaN         NaN\n  4.25         NaN         NaN\n  4.50         NaN         NaN\n  4.75         NaN         NaN\n  5.00         NaN         NaN\n\n Note: Gamma is Odds of Differential Assignment To\n Treatment Due to Unobserved Factors \n \n\n\nOur conclusions regarding the impact of low dentists proportions increasing excessive drinking prevalence in US counties hold true in absence of biases in the study. This conclusion is maintained in the presence of a biases level between L= 1.00 and L= 1.25. This means that only small hidden bias is needed to change our conclusions.",
    "crumbs": [
      "<span class='chapter-number'>6</span>  <span class='chapter-title'>Dentists, Adult Smoking, and Excessive Drinking</span>"
    ]
  }
]